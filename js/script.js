!function t(e,n,r){function o(a,u){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return o(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){function e(){this._events={},this._conf&&o.call(this,this._conf)}function o(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function i(t){this._events={},this.newListener=!1,o.call(this,t)}function a(t,e,n,r){if(!n)return[];var o,i,u,c,s,l,f,h=[],p=e.length,v=e[r],d=e[r+1];if(r===p&&n._listeners){if("function"==typeof n._listeners)return t&&t.push(n._listeners),[n];for(o=0,i=n._listeners.length;i>o;o++)t&&t.push(n._listeners[o]);return[n]}if("*"===v||"**"===v||n[v]){if("*"===v){for(u in n)"_listeners"!==u&&n.hasOwnProperty(u)&&(h=h.concat(a(t,e,n[u],r+1)));return h}if("**"===v){f=r+1===p||r+2===p&&"*"===d,f&&n._listeners&&(h=h.concat(a(t,e,n,p)));for(u in n)"_listeners"!==u&&n.hasOwnProperty(u)&&("*"===u||"**"===u?(n[u]._listeners&&!f&&(h=h.concat(a(t,e,n[u],p))),h=h.concat(a(t,e,n[u],r))):h=u===d?h.concat(a(t,e,n[u],r+2)):h.concat(a(t,e,n[u],r)));return h}h=h.concat(a(t,e,n[v],r+1))}if(c=n["*"],c&&a(t,e,c,r+1),s=n["**"])if(p>r){s._listeners&&a(t,e,s,p);for(u in s)"_listeners"!==u&&s.hasOwnProperty(u)&&(u===d?a(t,e,s[u],r+2):u===v?a(t,e,s[u],r+1):(l={},l[u]=s[u],a(t,e,{"**":l},r+1)))}else s._listeners?a(t,e,s,p):s["*"]&&s["*"]._listeners&&a(t,e,s["*"],p);return h}function u(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var n=0,r=t.length;r>n+1;n++)if("**"===t[n]&&"**"===t[n+1])return;for(var o=this.listenerTree,i=t.shift();i;){if(o[i]||(o[i]={}),o=o[i],0===t.length){if(o._listeners){if("function"==typeof o._listeners)o._listeners=[o._listeners,e];else if(c(o._listeners)&&(o._listeners.push(e),!o._listeners.warned)){var a=s;"undefined"!=typeof this._events.maxListeners&&(a=this._events.maxListeners),a>0&&o._listeners.length>a&&(o._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",o._listeners.length),console.trace())}}else o._listeners=e;return!0}i=t.shift()}return!0}var c=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=10;i.prototype.delimiter=".",i.prototype.setMaxListeners=function(t){this._events||e.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},i.prototype.event="",i.prototype.once=function(t,e){return this.many(t,1,e),this},i.prototype.many=function(t,e,n){function r(){0===--e&&o.off(t,r),n.apply(this,arguments)}var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return r._origin=n,this.on(t,r),o},i.prototype.emit=function(){this._events||e.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var n=arguments.length,r=new Array(n-1),o=1;n>o;o++)r[o-1]=arguments[o];for(o=0,n=this._all.length;n>o;o++)this.event=t,this._all[o].apply(this,r)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var i;if(this.wildcard){i=[];var u="string"==typeof t?t.split(this.delimiter):t.slice();a.call(this,i,u,this.listenerTree,0)}else i=this._events[t];if("function"==typeof i){if(this.event=t,1===arguments.length)i.call(this);else if(arguments.length>1)switch(arguments.length){case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(var n=arguments.length,r=new Array(n-1),o=1;n>o;o++)r[o-1]=arguments[o];i.apply(this,r)}return!0}if(i){for(var n=arguments.length,r=new Array(n-1),o=1;n>o;o++)r[o-1]=arguments[o];for(var c=i.slice(),o=0,n=c.length;n>o;o++)this.event=t,c[o].apply(this,r);return c.length>0||!!this._all}return!!this._all},i.prototype.on=function(t,n){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");if(this._events||e.call(this),this.emit("newListener",t,n),this.wildcard)return u.call(this,t,n),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],n];else if(c(this._events[t])&&(this._events[t].push(n),!this._events[t].warned)){var r=s;"undefined"!=typeof this._events.maxListeners&&(r=this._events.maxListeners),r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=n;return this},i.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},i.prototype.addListener=i.prototype.on,i.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var o="string"==typeof t?t.split(this.delimiter):t.slice();r=a.call(this,null,o,this.listenerTree,0)}else{if(!this._events[t])return this;n=this._events[t],r.push({_listeners:n})}for(var i=0;i<r.length;i++){var u=r[i];if(n=u._listeners,c(n)){for(var s=-1,l=0,f=n.length;f>l;l++)if(n[l]===e||n[l].listener&&n[l].listener===e||n[l]._origin&&n[l]._origin===e){s=l;break}if(0>s)continue;return this.wildcard?u._listeners.splice(s,1):this._events[t].splice(s,1),0===n.length&&(this.wildcard?delete u._listeners:delete this._events[t]),this}(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete u._listeners:delete this._events[t])}return this},i.prototype.offAny=function(t){var e,n=0,r=0;if(t&&this._all&&this._all.length>0){for(e=this._all,n=0,r=e.length;r>n;n++)if(t===e[n])return e.splice(n,1),this}else this._all=[];return this},i.prototype.removeListener=i.prototype.off,i.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||e.call(this),this;if(this.wildcard)for(var n="string"==typeof t?t.split(this.delimiter):t.slice(),r=a.call(this,null,n,this.listenerTree,0),o=0;o<r.length;o++){var i=r[o];i._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},i.prototype.listeners=function(t){if(this.wildcard){var n=[],r="string"==typeof t?t.split(this.delimiter):t.slice();return a.call(this,n,r,this.listenerTree,0),n}return this._events||e.call(this),this._events[t]||(this._events[t]=[]),c(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},i.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return i}):"object"===("undefined"==typeof n?"undefined":r(n))?n.EventEmitter2=i:window.EventEmitter2=i}()},{}],2:[function(t,e,n){"use strict";THREE.OrbitControls=function(t,e){function n(){return 2*Math.PI/60/60*H.autoRotateSpeed}function r(){return Math.pow(.95,H.zoomSpeed)}function o(t){D.theta-=t}function i(t){D.phi-=t}function a(t){H.object instanceof THREE.PerspectiveCamera?Y/=t:H.object instanceof THREE.OrthographicCamera?(H.object.zoom=Math.max(H.minZoom,Math.min(H.maxZoom,H.object.zoom*t)),H.object.updateProjectionMatrix(),G=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),H.enableZoom=!1)}function u(t){H.object instanceof THREE.PerspectiveCamera?Y*=t:H.object instanceof THREE.OrthographicCamera?(H.object.zoom=Math.max(H.minZoom,Math.min(H.maxZoom,H.object.zoom/t)),H.object.updateProjectionMatrix(),G=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),H.enableZoom=!1)}function c(t){W.set(t.clientX,t.clientY)}function s(t){q.set(t.clientX,t.clientY)}function l(t){U.set(t.clientX,t.clientY)}function f(t){Z.set(t.clientX,t.clientY),$.subVectors(Z,W);var e=H.domElement===document?H.domElement.body:H.domElement;o(2*Math.PI*$.x/e.clientWidth*H.rotateSpeed),i(2*Math.PI*$.y/e.clientHeight*H.rotateSpeed),W.copy(Z),H.update()}function h(t){Q.set(t.clientX,t.clientY),J.subVectors(Q,q),J.y>0?a(r()):J.y<0&&u(r()),q.copy(Q),H.update()}function p(t){F.set(t.clientX,t.clientY),K.subVectors(F,U),nt(K.x,K.y),U.copy(F),H.update()}function v(t){}function d(t){var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?u(r()):0>e&&a(r()),H.update()}function m(t){switch(t.keyCode){case H.keys.UP:nt(0,H.keyPanSpeed),H.update();break;case H.keys.BOTTOM:nt(0,-H.keyPanSpeed),H.update();break;case H.keys.LEFT:nt(H.keyPanSpeed,0),H.update();break;case H.keys.RIGHT:nt(-H.keyPanSpeed,0),H.update()}}function _(t){W.set(t.touches[0].pageX,t.touches[0].pageY)}function E(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);q.set(0,r)}function y(t){U.set(t.touches[0].pageX,t.touches[0].pageY)}function g(t){Z.set(t.touches[0].pageX,t.touches[0].pageY),$.subVectors(Z,W);var e=H.domElement===document?H.domElement.body:H.domElement;o(2*Math.PI*$.x/e.clientWidth*H.rotateSpeed),i(2*Math.PI*$.y/e.clientHeight*H.rotateSpeed),W.copy(Z),H.update()}function w(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(e*e+n*n);Q.set(0,o),J.subVectors(Q,q),J.y>0?u(r()):J.y<0&&a(r()),q.copy(Q),H.update()}function b(t){F.set(t.touches[0].pageX,t.touches[0].pageY),K.subVectors(F,U),nt(K.x,K.y),U.copy(F),H.update()}function k(t){}function T(t){if(H.enabled!==!1){if(t.preventDefault(),t.button===H.mouseButtons.ORBIT){if(H.enableRotate===!1)return;c(t),V=M.ROTATE}else if(t.button===H.mouseButtons.ZOOM){if(H.enableZoom===!1)return;s(t),V=M.DOLLY}else if(t.button===H.mouseButtons.PAN){if(H.enablePan===!1)return;l(t),V=M.PAN}V!==M.NONE&&(document.addEventListener("mousemove",O,!1),document.addEventListener("mouseup",R,!1),document.addEventListener("mouseout",R,!1),H.dispatchEvent(I))}}function O(t){if(H.enabled!==!1)if(t.preventDefault(),V===M.ROTATE){if(H.enableRotate===!1)return;f(t)}else if(V===M.DOLLY){if(H.enableZoom===!1)return;h(t)}else if(V===M.PAN){if(H.enablePan===!1)return;p(t)}}function R(t){H.enabled!==!1&&(v(t),document.removeEventListener("mousemove",O,!1),document.removeEventListener("mouseup",R,!1),document.removeEventListener("mouseout",R,!1),H.dispatchEvent(N),V=M.NONE)}function L(t){H.enabled!==!1&&H.enableZoom!==!1&&V===M.NONE&&(t.preventDefault(),t.stopPropagation(),d(t),H.dispatchEvent(I),H.dispatchEvent(N))}function C(t){H.enabled!==!1&&H.enableKeys!==!1&&H.enablePan!==!1&&m(t)}function x(t){if(H.enabled!==!1){switch(t.touches.length){case 1:if(H.enableRotate===!1)return;_(t),V=M.TOUCH_ROTATE;break;case 2:if(H.enableZoom===!1)return;E(t),V=M.TOUCH_DOLLY;break;case 3:if(H.enablePan===!1)return;y(t),V=M.TOUCH_PAN;break;default:V=M.NONE}V!==M.NONE&&H.dispatchEvent(I)}}function A(t){if(H.enabled!==!1)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(H.enableRotate===!1)return;if(V!==M.TOUCH_ROTATE)return;g(t);break;case 2:if(H.enableZoom===!1)return;if(V!==M.TOUCH_DOLLY)return;w(t);break;case 3:if(H.enablePan===!1)return;if(V!==M.TOUCH_PAN)return;b(t);break;default:V=M.NONE}}function S(t){H.enabled!==!1&&(k(t),H.dispatchEvent(N),V=M.NONE)}function j(t){t.preventDefault()}this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return phi},this.getAzimuthalAngle=function(){return theta},this.reset=function(){H.target.copy(H.target0),H.object.position.copy(H.position0),H.object.zoom=H.zoom0,H.object.updateProjectionMatrix(),H.dispatchEvent(B),H.update(),V=M.NONE},this.update=function(){var e=new THREE.Vector3,r=(new THREE.Quaternion).setFromUnitVectors(t.up,new THREE.Vector3(0,1,0)),i=r.clone().inverse(),a=new THREE.Vector3,u=new THREE.Quaternion;return function(){var t=H.object.position;return e.copy(t).sub(H.target),e.applyQuaternion(r),P.setFromVector3(e),H.autoRotate&&V===M.NONE&&o(n()),P.theta+=D.theta,P.phi+=D.phi,P.theta=Math.max(H.minAzimuthAngle,Math.min(H.maxAzimuthAngle,P.theta)),P.phi=Math.max(H.minPolarAngle,Math.min(H.maxPolarAngle,P.phi)),P.makeSafe(),P.radius*=Y,P.radius=Math.max(H.minDistance,Math.min(H.maxDistance,P.radius)),H.target.add(z),e.setFromSpherical(P),e.applyQuaternion(i),t.copy(H.target).add(e),H.object.lookAt(H.target),H.enableDamping===!0?(D.theta*=1-H.dampingFactor,D.phi*=1-H.dampingFactor):D.set(0,0,0),Y=1,z.set(0,0,0),G||a.distanceToSquared(H.object.position)>X||8*(1-u.dot(H.object.quaternion))>X?(H.dispatchEvent(B),a.copy(H.object.position),u.copy(H.object.quaternion),G=!1,!0):!1}}(),this.dispose=function(){H.domElement.removeEventListener("contextmenu",j,!1),H.domElement.removeEventListener("mousedown",T,!1),H.domElement.removeEventListener("mousewheel",L,!1),H.domElement.removeEventListener("MozMousePixelScroll",L,!1),H.domElement.removeEventListener("touchstart",x,!1),H.domElement.removeEventListener("touchend",S,!1),H.domElement.removeEventListener("touchmove",A,!1),document.removeEventListener("mousemove",O,!1),document.removeEventListener("mouseup",R,!1),document.removeEventListener("mouseout",R,!1),window.removeEventListener("keydown",C,!1)};var H=this,B={type:"change"},I={type:"start"},N={type:"end"},M={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},V=M.NONE,X=1e-6,P=new THREE.Spherical,D=new THREE.Spherical,Y=1,z=new THREE.Vector3,G=!1,W=new THREE.Vector2,Z=new THREE.Vector2,$=new THREE.Vector2,U=new THREE.Vector2,F=new THREE.Vector2,K=new THREE.Vector2,q=new THREE.Vector2,Q=new THREE.Vector2,J=new THREE.Vector2,tt=function(){var t=new THREE.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),z.add(t)}}(),et=function(){var t=new THREE.Vector3;return function(e,n){t.setFromMatrixColumn(n,1),t.multiplyScalar(e),z.add(t)}}(),nt=function(){var t=new THREE.Vector3;return function(e,n){var r=H.domElement===document?H.domElement.body:H.domElement;if(H.object instanceof THREE.PerspectiveCamera){var o=H.object.position;t.copy(o).sub(H.target);var i=t.length();i*=Math.tan(H.object.fov/2*Math.PI/180),tt(2*e*i/r.clientHeight,H.object.matrix),et(2*n*i/r.clientHeight,H.object.matrix)}else H.object instanceof THREE.OrthographicCamera?(tt(e*(H.object.right-H.object.left)/H.object.zoom/r.clientWidth,H.object.matrix),et(n*(H.object.top-H.object.bottom)/H.object.zoom/r.clientHeight,H.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),H.enablePan=!1)}}();H.domElement.addEventListener("contextmenu",j,!1),H.domElement.addEventListener("mousedown",T,!1),H.domElement.addEventListener("mousewheel",L,!1),H.domElement.addEventListener("MozMousePixelScroll",L,!1),H.domElement.addEventListener("touchstart",x,!1),H.domElement.addEventListener("touchend",S,!1),H.domElement.addEventListener("touchmove",A,!1),window.addEventListener("keydown",C,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(t){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!t}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(t){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=t}}})},{}],3:[function(t,e,n){(function(t){(function(){function r(t,e){return t.set(e[0],e[1]),t}function o(t,e){return t.add(e),t}function i(t,e,n){var r=n.length;switch(r){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function a(t,e,n,r){for(var o=-1,i=t.length;++o<i;){var a=t[o];e(r,a,n(a),t)}return r}function u(t,e){for(var n=-1,r=t.length,o=-1,i=e.length,a=Array(r+i);++n<r;)a[n]=t[n];for(;++o<i;)a[n++]=e[o];return a}function c(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function s(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function l(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function f(t,e){for(var n=-1,r=t.length,o=-1,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[++o]=a)}return i}function h(t,e){return!!t.length&&b(t,e,0)>-1}function p(t,e,n){for(var r=-1,o=t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function v(t,e){for(var n=-1,r=t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function d(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function m(t,e,n,r){var o=-1,i=t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function _(t,e,n,r){var o=t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function E(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function y(t,e,n){for(var r=-1,o=t.length;++r<o;){var i=t[r],a=e(i);if(null!=a&&(u===K?a===a:n(a,u)))var u=a,c=i}return c}function g(t,e,n,r){var o;return n(t,function(t,n,i){return e(t,n,i)?(o=r?n:t,!1):void 0}),o}function w(t,e,n){for(var r=t.length,o=n?r:-1;n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function b(t,e,n){if(e!==e)return X(t,n);for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}function k(t,e,n,r,o){return o(t,function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)}),n}function T(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function O(t,e){for(var n,r=-1,o=t.length;++r<o;){var i=e(t[r]);i!==K&&(n=n===K?i:n+i)}return n}function R(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function L(t,e){return v(e,function(e){return[e,t[e]]})}function C(t){return function(e){return t(e)}}function x(t,e){return v(e,function(e){return t[e]})}function A(t,e){for(var n=-1,r=t.length;++n<r&&b(e,t[n],0)>-1;);return n}function S(t,e){for(var n=t.length;n--&&b(e,t[n],0)>-1;);return n}function j(t){return t&&t.Object===Object?t:null}function H(t,e){if(t!==e){var n=null===t,r=t===K,o=t===t,i=null===e,a=e===K,u=e===e;if(t>e&&!i||!o||n&&!a&&u||r&&u)return 1;if(e>t&&!n||!u||i&&!r&&o||a&&o)return-1}return 0}function B(t,e,n){for(var r=-1,o=t.criteria,i=e.criteria,a=o.length,u=n.length;++r<a;){var c=H(o[r],i[r]);if(c){if(r>=u)return c;var s=n[r];return c*("desc"==s?-1:1)}}return t.index-e.index}function I(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&r++;return r}function N(t){return wn[t]}function M(t){return bn[t]}function V(t){return"\\"+On[t]}function X(t,e,n){for(var r=t.length,o=e+(n?0:-1);n?o--:++o<r;){var i=t[o];if(i!==i)return o}return-1}function P(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function D(t,e){return t="number"==typeof t||Re.test(t)?+t:-1,e=null==e?wt:e,t>-1&&t%1==0&&e>t}function Y(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function z(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function G(t,e){for(var n=-1,r=t.length,o=-1,i=[];++n<r;){var a=t[n];a!==e&&a!==Lt||(t[n]=Lt,i[++o]=n)}return i}function W(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Z(t){if(!t||!pn.test(t))return t.length;for(var e=hn.lastIndex=0;hn.test(t);)e++;return e}function $(t){return t.match(hn)}function U(t){return kn[t]}function F(t){function e(t){if(Xa(t)&&!wl(t)&&!(t instanceof Re)){if(t instanceof j)return t;if(Gc.call(t,"__wrapped__"))return Bo(t)}return new j(t)}function n(){}function j(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=K}function Re(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Tt,this.__views__=[]}function Ae(){var t=new Re(this.__wrapped__);return t.__actions__=Vr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Vr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Vr(this.__views__),t}function Se(){if(this.__filtered__){var t=new Re(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function je(){var t=this.__wrapped__.value(),e=this.__dir__,n=wl(t),r=0>e,o=n?t.length:0,i=_o(0,o,this.__views__),a=i.start,u=i.end,c=u-a,s=r?u:a-1,l=this.__iteratees__,f=l.length,h=0,p=ds(c,this.__takeCount__);if(!n||vt>o||o==c&&p==c)return Rr(t,this.__actions__);var v=[];t:for(;c--&&p>h;){s+=e;for(var d=-1,m=t[s];++d<f;){var _=l[d],E=_.iteratee,y=_.type,g=E(m);if(y==mt)m=g;else if(!g){if(y==dt)continue t;break t}}v[h++]=m}return v}function He(){}function Be(t,e){return Ne(t,e)&&delete t[e]}function Ie(t,e){if(bs){var n=t[e];return n===yt?K:n}return Gc.call(t,e)?t[e]:K}function Ne(t,e){return bs?t[e]!==K:Gc.call(t,e)}function Me(t,e,n){t[e]=bs&&n===K?yt:n}function Ve(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xe(){this.__data__={hash:new He,map:ys?new ys:[],string:new He}}function Pe(t){var e=this.__data__;return Oo(t)?Be("string"==typeof t?e.string:e.hash,t):ys?e.map["delete"](t):Je(e.map,t)}function De(t){var e=this.__data__;return Oo(t)?Ie("string"==typeof t?e.string:e.hash,t):ys?e.map.get(t):tn(e.map,t)}function Ye(t){var e=this.__data__;return Oo(t)?Ne("string"==typeof t?e.string:e.hash,t):ys?e.map.has(t):en(e.map,t)}function ze(t,e){var n=this.__data__;return Oo(t)?Me("string"==typeof t?n.string:n.hash,t,e):ys?n.map.set(t,e):rn(n.map,t,e),this}function Ge(t){var e=-1,n=t?t.length:0;for(this.__data__=new Ve;++e<n;)this.push(t[e])}function We(t,e){var n=t.__data__;if(Oo(e)){var r=n.__data__,o="string"==typeof e?r.string:r.hash;return o[e]===yt}return n.has(e)}function Ze(t){var e=this.__data__;if(Oo(t)){var n=e.__data__,r="string"==typeof t?n.string:n.hash;r[t]=yt}else e.set(t,yt)}function $e(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ue(){this.__data__={array:[],map:null}}function Fe(t){var e=this.__data__,n=e.array;return n?Je(n,t):e.map["delete"](t)}function Ke(t){var e=this.__data__,n=e.array;return n?tn(n,t):e.map.get(t)}function qe(t){var e=this.__data__,n=e.array;return n?en(n,t):e.map.has(t)}function Qe(t,e){var n=this.__data__,r=n.array;r&&(r.length<vt-1?rn(r,t,e):(n.array=null,n.map=new Ve(r)));var o=n.map;return o&&o.set(t,e),this}function Je(t,e){var n=nn(t,e);if(0>n)return!1;var r=t.length-1;return n==r?t.pop():cs.call(t,n,1),!0}function tn(t,e){var n=nn(t,e);return 0>n?K:t[n][1]}function en(t,e){return nn(t,e)>-1}function nn(t,e){for(var n=t.length;n--;)if(ga(t[n][0],e))return n;return-1}function rn(t,e,n){var r=nn(t,e);0>r?t.push([e,n]):t[r][1]=n}function on(t,e,n,r){return t===K||ga(t,Yc[n])&&!Gc.call(r,n)?e:t}function an(t,e,n){(n===K||ga(t[e],n))&&("number"!=typeof e||n!==K||e in t)||(t[e]=n)}function un(t,e,n){var r=t[e];Gc.call(t,e)&&ga(r,n)&&(n!==K||e in t)||(t[e]=n)}function cn(t,e,n,r){return Ss(t,function(t,o,i){e(r,t,n(t),i)}),r}function sn(t,e){return t&&Xr(e,Ou(e),t)}function ln(t,e){for(var n=-1,r=null==t,o=e.length,i=Array(o);++n<o;)i[n]=r?K:bu(t,e[n]);return i}function hn(t){return Ra(t)?t:[]}function wn(t){return"function"==typeof t?t:vc}function bn(t){return wl(t)?t:Ho(t)}function kn(t,e,n){return t===t&&(n!==K&&(t=n>=t?t:n),e!==K&&(t=t>=e?t:e)),t}function Tn(t,e,n,r,o,i){var a;if(n&&(a=o?n(t,r,o,i):n(t)),a!==K)return a;if(!Va(t))return t;var u=wl(t);if(u){if(a=yo(t),!e)return Vr(t,a)}else{var s=mo(t),l=s==Ht||s==Bt;if(bl(t))return xr(t,e);if(s==Mt||s==Ct||l&&!o){if(P(t))return o?t:{};if(a=go(l?{}:t),!e)return Dr(t,sn(a,t))}else{if(!gn[s])return o?t:{};a=wo(t,s,e)}}i||(i=new $e);var f=i.get(t);return f?f:(i.set(t,a),(u?c:Xn)(t,function(r,o){un(a,o,Tn(r,e,n,o,t,i))}),u?a:Dr(t,a))}function On(t){var e=Ou(t),n=e.length;return function(r){if(null==r)return!n;for(var o=n;o--;){var i=e[o],a=t[i],u=r[i];if(u===K&&!(i in Object(r))||!a(u))return!1}return!0}}function Cn(t){return Va(t)?is(t):{}}function xn(t,e,n){if("function"!=typeof t)throw new Pc(Et);return us(function(){t.apply(K,n)},e)}function Sn(t,e,n,r){var o=-1,i=h,a=!0,u=t.length,c=[],s=e.length;if(!u)return c;n&&(e=v(e,C(n))),r?(i=p,a=!1):e.length>=vt&&(i=We,a=!1,e=new Ge(e));t:for(;++o<u;){var l=t[o],f=n?n(l):l;if(a&&f===f){for(var d=s;d--;)if(e[d]===f)continue t;c.push(l)}else i(e,f,r)||c.push(l)}return c}function jn(t,e){var n=!0;return Ss(t,function(t,r,o){return n=!!e(t,r,o)}),n}function Hn(t,e,n,r){var o=t.length;for(n=uu(n),0>n&&(n=-n>o?0:o+n),r=r===K||r>o?o:uu(r),0>r&&(r+=o),r=n>r?0:cu(r);r>n;)t[n++]=e;return t}function Bn(t,e){var n=[];return Ss(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n}function Mn(t,e,n,r){r||(r=[]);for(var o=-1,i=t.length;++o<i;){var a=t[o];e>0&&Ra(a)&&(n||wl(a)||ka(a))?e>1?Mn(a,e-1,n,r):d(r,a):n||(r[r.length]=a)}return r}function Vn(t,e){return null==t?t:Hs(t,e,Ru)}function Xn(t,e){return t&&Hs(t,e,Ou)}function Pn(t,e){return t&&Bs(t,e,Ou)}function Dn(t,e){return f(e,function(e){return Ia(t[e])})}function Yn(t,e){e=To(e,t)?[e+""]:bn(e);for(var n=0,r=e.length;null!=t&&r>n;)t=t[e[n++]];return n&&n==r?t:K}function zn(t,e){return Gc.call(t,e)||"object"==typeof t&&e in t&&null===ns(t)}function Gn(t,e){return e in Object(t)}function Wn(t,e,n){return t>=ds(e,n)&&t<vs(e,n)}function Zn(t,e,n){for(var r=n?p:h,o=t.length,i=o,a=Array(o),u=[];i--;){var c=t[i];i&&e&&(c=v(c,C(e))),a[i]=!n&&(e||c.length>=120)?new Ge(i&&c):K}c=t[0];var s=-1,l=c.length,f=a[0];t:for(;++s<l;){var d=c[s],m=e?e(d):d;if(!(f?We(f,m):r(u,m,n))){for(var i=o;--i;){var _=a[i];if(!(_?We(_,m):r(t[i],m,n)))continue t}f&&f.push(m),u.push(d)}}return u}function $n(t,e,n,r){return Xn(t,function(t,o,i){e(r,n(t),o,i)}),r}function Un(t,e,n){To(e,t)||(e=bn(e),t=So(t,e),e=Qo(e));var r=null==t?t:t[e];return null==r?K:i(r,t,n)}function Fn(t,e,n,r,o){return t===e?!0:null==t||null==e||!Va(t)&&!Xa(e)?t!==t&&e!==e:Kn(t,e,Fn,n,r,o)}function Kn(t,e,n,r,o,i){var a=wl(t),u=wl(e),c=xt,s=xt;a||(c=mo(t),c==Ct?c=Mt:c!=Mt&&(a=tu(t))),u||(s=mo(e),s==Ct?s=Mt:s!=Mt&&(u=tu(e)));var l=c==Mt&&!P(t),f=s==Mt&&!P(e),h=c==s;if(h&&!a&&!l)return co(t,e,c,n,r,o);var p=o&st;if(!p){var v=l&&Gc.call(t,"__wrapped__"),d=f&&Gc.call(e,"__wrapped__");if(v||d)return n(v?t.value():t,d?e.value():e,r,o,i)}return h?(i||(i=new $e),(a?uo:so)(t,e,n,r,o,i)):!1}function qn(t,e,n,r){var o=n.length,i=o,a=!r;if(null==t)return!i;for(t=Object(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){u=n[o];var c=u[0],s=t[c],l=u[1];if(a&&u[2]){if(s===K&&!(c in t))return!1}else{var f=new $e,h=r?r(s,l,c,t,e,f):K;if(!(h===K?Fn(l,s,r,ct|st,f):h))return!1}}return!0}function Qn(t){var e=typeof t;return"function"==e?t:null==t?vc:"object"==e?wl(t)?rr(t[0],t[1]):nr(t):bc(t)}function Jn(t){return ps(Object(t))}function tr(t){t=null==t?t:Object(t);var e=[];for(var n in t)e.push(n);return e}function er(t,e){var n=-1,r=Oa(t)?Array(t.length):[];return Ss(t,function(t,o,i){r[++n]=e(t,o,i)}),r}function nr(t){var e=ho(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null==t?!1:t[n]===r&&(r!==K||n in Object(t))}}return function(n){return n===t||qn(n,t,e)}}function rr(t,e){return function(n){var r=bu(n,t);return r===K&&r===e?Tu(n,t):Fn(e,r,K,ct|st)}}function or(t,e,n,r,o){if(t!==e){var i=wl(e)||tu(e)?K:Ru(e);c(i||e,function(a,u){if(i&&(u=a,a=e[u]),Va(a))o||(o=new $e),ir(t,e,u,n,or,r,o);else{var c=r?r(t[u],a,u+"",t,e,o):K;c===K&&(c=a),an(t,u,c)}})}}function ir(t,e,n,r,o,i,a){var u=t[n],c=e[n],s=a.get(c);if(s)return void an(t,n,s);var l=i?i(u,c,n+"",t,e,a):K,f=l===K;f&&(l=c,wl(c)||tu(c)?wl(u)?l=u:Ra(u)?l=Vr(u):(f=!1,l=Tn(c,!0)):Ua(c)||ka(c)?ka(u)?l=lu(u):!Va(u)||r&&Ia(u)?(f=!1,l=Tn(c,!0)):l=u:f=!1),a.set(c,l),f&&o(l,c,r,i,a),an(t,n,l)}function ar(t,e,n){var r=-1,o=fo();e=v(e.length?e:Array(1),function(t){return o(t)});var i=er(t,function(t,n,o){var i=v(e,function(e){return e(t)});return{criteria:i,index:++r,value:t}});return T(i,function(t,e){return B(t,e,n)})}function ur(t,e){return t=Object(t),m(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}function cr(t,e){var n={};return Vn(t,function(t,r){e(t,r)&&(n[r]=t)}),n}function sr(t){return function(e){return null==e?K:e[t]}}function lr(t){return function(e){return Yn(e,t)}}function fr(t,e){return hr(t,e)}function hr(t,e,n){var r=-1,o=e.length,i=t;for(n&&(i=v(t,function(t){return n(t)}));++r<o;)for(var a=0,u=e[r],c=n?n(u):u;(a=b(i,c,a))>-1;)i!==t&&cs.call(i,a,1),cs.call(t,a,1);return t}function pr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(r==n||o!=i){var i=o;if(D(o))cs.call(t,o,1);else if(To(o,t))delete t[o];else{var a=bn(o),u=So(t,a);null!=u&&delete u[Qo(a)]}}}return t}function vr(t,e){return t+ls(_s()*(e-t+1))}function dr(t,e,n,r){for(var o=-1,i=vs(ss((e-t)/(n||1)),0),a=Array(i);i--;)a[r?i:++o]=t,t+=n;return a}function mr(t,e,n,r){e=To(e,t)?[e+""]:bn(e);for(var o=-1,i=e.length,a=i-1,u=t;null!=u&&++o<i;){var c=e[o];if(Va(u)){var s=n;if(o!=a){var l=u[c];s=r?r(l,c,u):K,s===K&&(s=null==l?D(e[o+1])?[]:{}:l)}un(u,c,s)}u=u[c]}return t}function _r(t,e,n){var r=-1,o=t.length;0>e&&(e=-e>o?0:o+e),n=n>o?o:n,0>n&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}function Er(t,e){var n;return Ss(t,function(t,r,o){return n=e(t,r,o),!n}),!!n}function yr(t,e,n){var r=0,o=t?t.length:r;if("number"==typeof e&&e===e&&Rt>=o){
for(;o>r;){var i=r+o>>>1,a=t[i];(n?e>=a:e>a)&&null!==a?r=i+1:o=i}return o}return gr(t,e,vc,n)}function gr(t,e,n,r){e=n(e);for(var o=0,i=t?t.length:0,a=e!==e,u=null===e,c=e===K;i>o;){var s=ls((o+i)/2),l=n(t[s]),f=l!==K,h=l===l;if(a)var p=h||r;else p=u?h&&f&&(r||null!=l):c?h&&(r||f):null==l?!1:r?e>=l:e>l;p?o=s+1:i=s}return ds(i,Ot)}function wr(t){return br(t)}function br(t,e){for(var n=0,r=t.length,o=t[0],i=e?e(o):o,a=i,u=0,c=[o];++n<r;)o=t[n],i=e?e(o):o,ga(i,a)||(a=i,c[++u]=o);return c}function kr(t,e,n){var r=-1,o=h,i=t.length,a=!0,u=[],c=u;if(n)a=!1,o=p;else if(i>=vt){var s=e?null:Ns(t);if(s)return W(s);a=!1,o=We,c=new Ge}else c=e?[]:u;t:for(;++r<i;){var l=t[r],f=e?e(l):l;if(a&&f===f){for(var v=c.length;v--;)if(c[v]===f)continue t;e&&c.push(f),u.push(l)}else o(c,f,n)||(c!==u&&c.push(f),u.push(l))}return u}function Tr(t,e){e=To(e,t)?[e+""]:bn(e),t=So(t,e);var n=Qo(e);return null!=t&&ku(t,n)?delete t[n]:!0}function Or(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?_r(t,r?0:i,r?i+1:o):_r(t,r?i+1:0,r?o:i)}function Rr(t,e){var n=t;return n instanceof Re&&(n=n.value()),m(e,function(t,e){return e.func.apply(e.thisArg,d([t],e.args))},n)}function Lr(t,e,n){for(var r=-1,o=t.length;++r<o;)var i=i?d(Sn(i,t[r],e,n),Sn(t[r],i,e,n)):t[r];return i&&i.length?kr(i,e,n):[]}function Cr(t,e,n){for(var r=-1,o=t.length,i=e.length,a={};++r<o;)n(a,t[r],i>r?e[r]:K);return a}function xr(t,e){if(e)return t.slice();var n=t.constructor,r=new n(t.length);return t.copy(r),r}function Ar(t){var e=t.constructor,n=new e(t.byteLength),r=new Jc(n);return r.set(new Jc(t)),n}function Sr(t){var e=t.constructor;return m(z(t),r,new e)}function jr(t){var e=t.constructor,n=new e(t.source,ge.exec(t));return n.lastIndex=t.lastIndex,n}function Hr(t){var e=t.constructor;return m(W(t),o,new e)}function Br(t){return Qc?Object(Cs.call(t)):{}}function Ir(t,e){var n=t.buffer,r=e?Ar(n):n,o=t.constructor;return new o(r,t.byteOffset,t.length)}function Nr(t,e,n,r){for(var o=-1,i=t.length,a=n.length,u=-1,c=e.length,s=vs(i-a,0),l=Array(c+s),f=!r;++u<c;)l[u]=e[u];for(;++o<a;)(f||i>o)&&(l[n[o]]=t[o]);for(;s--;)l[u++]=t[o++];return l}function Mr(t,e,n,r){for(var o=-1,i=t.length,a=-1,u=n.length,c=-1,s=e.length,l=vs(i-u,0),f=Array(l+s),h=!r;++o<l;)f[o]=t[o];for(var p=o;++c<s;)f[p+c]=e[c];for(;++a<u;)(h||i>o)&&(f[p+n[a]]=t[o++]);return f}function Vr(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function Xr(t,e,n){return Pr(t,e,n)}function Pr(t,e,n,r){n||(n={});for(var o=-1,i=e.length;++o<i;){var a=e[o],u=r?r(n[a],t[a],a,n,t):t[a];un(n,a,u)}return n}function Dr(t,e){return Xr(t,Xs(t),e)}function Yr(t,e){return function(n,r){var o=wl(n)?a:cn,i=e?e():{};return o(n,t,fo(r),i)}}function zr(t){return la(function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:K,a=o>2?n[2]:K;for(i="function"==typeof i?(o--,i):K,a&&ko(n[0],n[1],a)&&(i=3>o?K:i,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,i)}return e})}function Gr(t,e){return function(n,r){if(null==n)return n;if(!Oa(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=Object(n);(e?i--:++i<o)&&r(a[i],i,a)!==!1;);return n}}function Wr(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),u=a.length;u--;){var c=a[t?u:++o];if(n(i[c],c,i)===!1)break}return e}}function Zr(t,e,n){function r(){var e=this&&this!==In&&this instanceof r?i:t;return e.apply(o?n:this,arguments)}var o=e&Q,i=Fr(t);return r}function $r(t){return function(e){e=hu(e);var n=pn.test(e)?$(e):K,r=n?n[0]:e.charAt(0),o=n?n.slice(1).join(""):e.slice(1);return r[t]()+o}}function Ur(t){return function(e){return m(lc(Gu(e)),t,"")}}function Fr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Cn(t.prototype),r=t.apply(n,e);return Va(r)?r:n}}function Kr(t,e,n){function r(){for(var a=arguments.length,u=Array(a),c=a,s=vo(r);c--;)u[c]=arguments[c];var l=3>a&&u[0]!==s&&u[a-1]!==s?[]:G(u,s);if(a-=l.length,n>a)return oo(t,e,Qr,r.placeholder,K,u,l,K,K,n-a);var f=this&&this!==In&&this instanceof r?o:t;return i(f,this,u)}var o=Fr(t);return r}function qr(t){return la(function(e){e=Mn(e,1);var n=e.length,r=n,o=j.prototype.thru;for(t&&e.reverse();r--;){var i=e[r];if("function"!=typeof i)throw new Pc(Et);if(o&&!a&&"wrapper"==lo(i))var a=new j([],!0)}for(r=a?r:n;++r<n;){i=e[r];var u=lo(i),c="wrapper"==u?Ms(i):K;a=c&&Ro(c[0])&&c[1]==(it|et|rt|at)&&!c[4].length&&1==c[9]?a[lo(c[0])].apply(a,c[3]):1==i.length&&Ro(i)?a[u]():a.thru(i)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&wl(r)&&r.length>=vt)return a.plant(r).value();for(var o=0,i=n?e[o].apply(this,t):r;++o<n;)i=e[o].call(this,i);return i}})}function Qr(t,e,n,r,o,i,a,u,c,s){function l(){for(var _=arguments.length,E=_,y=Array(_);E--;)y[E]=arguments[E];if(v)var g=vo(l),w=I(y,g);if(r&&(y=Nr(y,r,o,v)),i&&(y=Mr(y,i,a,v)),_-=w,v&&s>_){var b=G(y,g);return oo(t,e,Qr,l.placeholder,n,y,b,u,c,s-_)}var k=h?n:this,T=p?k[t]:t;return _=y.length,u?y=jo(y,u):d&&_>1&&y.reverse(),f&&_>c&&(y.length=c),this&&this!==In&&this instanceof l&&(T=m||Fr(T)),T.apply(k,y)}var f=e&it,h=e&Q,p=e&J,v=e&(et|nt),d=e&ut,m=p?K:Fr(t);return l}function Jr(t,e){return function(n,r){return $n(n,t,e(r),{})}}function to(t){return la(function(e){return e=v(Mn(e,1),fo()),la(function(n){var r=this;return t(e,function(t){return i(t,r,n)})})})}function eo(t,e,n){e=uu(e);var r=Z(t);if(!e||r>=e)return"";var o=e-r;n=n===K?" ":n+"";var i=Qu(n,ss(o/Z(n)));return pn.test(n)?$(i).slice(0,o).join(""):i.slice(0,o)}function no(t,e,n,r){function o(){for(var e=-1,c=arguments.length,s=-1,l=r.length,f=Array(l+c),h=this&&this!==In&&this instanceof o?u:t;++s<l;)f[s]=r[s];for(;c--;)f[s++]=arguments[++e];return i(h,a?n:this,f)}var a=e&Q,u=Fr(t);return o}function ro(t){return function(e,n,r){return r&&"number"!=typeof r&&ko(e,n,r)&&(n=r=K),e=su(e),e=e===e?e:0,n===K?(n=e,e=0):n=su(n)||0,r=r===K?n>e?1:-1:su(r)||0,dr(e,n,r,t)}}function oo(t,e,n,r,o,i,a,u,c,s){var l=e&et,f=u?Vr(u):K,h=l?a:K,p=l?K:a,v=l?i:K,d=l?K:i;e|=l?rt:ot,e&=~(l?ot:rt),e&tt||(e&=~(Q|J));var m=[t,e,o,v,h,d,p,f,c,s],_=n.apply(K,m);return Ro(t)&&Ps(_,m),_.placeholder=r,_}function io(t){var e=Vc[t];return function(t,n){if(t=su(t),n=uu(n)){var r=(hu(t)+"e").split("e"),o=e(r[0]+"e"+(+r[1]+n));return r=(hu(o)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function ao(t,e,n,r,o,i,a,u){var c=e&J;if(!c&&"function"!=typeof t)throw new Pc(Et);var s=r?r.length:0;if(s||(e&=~(rt|ot),r=o=K),a=a===K?a:vs(uu(a),0),u=u===K?u:uu(u),s-=o?o.length:0,e&ot){var l=r,f=o;r=o=K}var h=c?K:Ms(t),p=[t,e,n,r,o,l,f,i,a,u];if(h&&xo(p,h),t=p[0],e=p[1],n=p[2],r=p[3],o=p[4],u=p[9]=null==p[9]?c?0:t.length:vs(p[9]-s,0),!u&&e&(et|nt)&&(e&=~(et|nt)),e&&e!=Q)v=e==et||e==nt?Kr(t,e,u):e!=rt&&e!=(Q|rt)||o.length?Qr.apply(K,p):no(t,e,n,r);else var v=Zr(t,e,n);var d=h?Is:Ps;return d(v,p)}function uo(t,e,n,r,o,i){var a=-1,u=o&st,c=o&ct,s=t.length,l=e.length;if(s!=l&&!(u&&l>s))return!1;var f=i.get(t);if(f)return f==e;var h=!0;for(i.set(t,e);++a<s;){var p=t[a],v=e[a];if(r)var d=u?r(v,p,a,e,t,i):r(p,v,a,t,e,i);if(d!==K){if(d)continue;h=!1;break}if(c){if(!E(e,function(t){return p===t||n(p,t,r,o,i)})){h=!1;break}}else if(p!==v&&!n(p,v,r,o,i)){h=!1;break}}return i["delete"](t),h}function co(t,e,n,r,o,i){switch(n){case Gt:return!(t.byteLength!=e.byteLength||!r(new Jc(t),new Jc(e)));case At:case St:return+t==+e;case jt:return t.name==e.name&&t.message==e.message;case Nt:return t!=+t?e!=+e:t==+e;case Vt:case Pt:return t==e+"";case It:var a=z;case Xt:var u=i&st;return a||(a=W),(u||t.size==e.size)&&r(a(t),a(e),o,i|ct);case Dt:return!!Qc&&Cs.call(t)==Cs.call(e)}return!1}function so(t,e,n,r,o,i){var a=o&st,u=Ou(t),c=u.length,s=Ou(e),l=s.length;if(c!=l&&!a)return!1;for(var f=c;f--;){var h=u[f];if(!(a?h in e:zn(e,h)))return!1}var p=i.get(t);if(p)return p==e;var v=!0;i.set(t,e);for(var d=a;++f<c;){h=u[f];var m=t[h],_=e[h];if(r)var E=a?r(_,m,h,e,t,i):r(m,_,h,t,e,i);if(!(E===K?m===_||n(m,_,r,o,i):E)){v=!1;break}d||(d="constructor"==h)}if(v&&!d){var y=t.constructor,g=e.constructor;y!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g)&&(v=!1)}return i["delete"](t),v}function lo(t){for(var e=t.name+"",n=As[e],r=Gc.call(As,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function fo(){var t=e.iteratee||dc;return t=t===dc?Qn:t,arguments.length?t(arguments[0],arguments[1]):t}function ho(t){for(var e=Bu(t),n=e.length;n--;)e[n][2]=Co(e[n][1]);return e}function po(t,e){var n=null==t?K:t[e];return Ga(n)?n:K}function vo(t){var n=Gc.call(e,"placeholder")?e:t;return n.placeholder}function mo(t){return $c.call(t)}function _o(t,e,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=ds(e,t+a);break;case"takeRight":t=vs(t,e-a)}}return{start:t,end:e}}function Eo(t,e,n){if(null==t)return!1;var r=n(t,e);r||To(e)||(e=bn(e),t=So(t,e),null!=t&&(e=Qo(e),r=n(t,e)));var o=t?t.length:K;return r||!!o&&Ma(o)&&D(e,o)&&(wl(t)||Qa(t)||ka(t))}function yo(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Gc.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function go(t){return Ia(t.constructor)&&!Lo(t)?Cn(ns(t)):{}}function wo(t,e,n){var r=t.constructor;switch(e){case Gt:return Ar(t);case At:case St:return new r(+t);case Wt:case Zt:case $t:case Ut:case Ft:case Kt:case qt:case Qt:case Jt:return Ir(t,n);case It:return Sr(t);case Nt:case Pt:return new r(t);case Vt:return jr(t);case Xt:return Hr(t);case Dt:return Br(t)}}function bo(t){var e=t?t.length:K;return Ma(e)&&(wl(t)||Qa(t)||ka(t))?R(e,String):null}function ko(t,e,n){if(!Va(n))return!1;var r=typeof e;return("number"==r?Oa(n)&&D(e,n.length):"string"==r&&e in n)?ga(n[e],t):!1}function To(t,e){return"number"==typeof t?!0:!wl(t)&&(fe.test(t)||!le.test(t)||null!=e&&t in Object(e))}function Oo(t){var e=typeof t;return"number"==e||"boolean"==e||"string"==e&&"__proto__"!=t||null==t}function Ro(t){var n=lo(t),r=e[n];if("function"!=typeof r||!(n in Re.prototype))return!1;if(t===r)return!0;var o=Ms(r);return!!o&&t===o[0]}function Lo(t){var e=t&&t.constructor,n=Ia(e)&&e.prototype||Yc;return t===n}function Co(t){return t===t&&!Va(t)}function xo(t,e){var n=t[1],r=e[1],o=n|r,i=(Q|J|it)>o,a=r==it&&n==et||r==it&&n==at&&t[7].length<=e[8]||r==(it|at)&&e[7].length<=e[8]&&n==et;if(!i&&!a)return t;r&Q&&(t[2]=e[2],o|=n&Q?0:tt);var u=e[3];if(u){var c=t[3];t[3]=c?Nr(c,u,e[4]):Vr(u),t[4]=c?G(t[3],Lt):Vr(e[4])}return u=e[5],u&&(c=t[5],t[5]=c?Mr(c,u,e[6]):Vr(u),t[6]=c?G(t[5],Lt):Vr(e[6])),u=e[7],u&&(t[7]=Vr(u)),r&it&&(t[8]=null==t[8]?e[8]:ds(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function Ao(t,e,n,r,o,i){return Va(t)&&Va(e)&&(i.set(e,t),or(t,e,K,Ao,i)),t}function So(t,e){return 1==e.length?t:bu(t,_r(e,0,-1))}function jo(t,e){for(var n=t.length,r=ds(e.length,n),o=Vr(t);r--;){var i=e[r];t[r]=D(i,n)?o[i]:K}return t}function Ho(t){var e=[];return hu(t).replace(he,function(t,n,r,o){e.push(r?o.replace(Ee,"$1"):n||t)}),e}function Bo(t){if(t instanceof Re)return t.clone();var e=new j(t.__wrapped__,t.__chain__);return e.__actions__=Vr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Io(t,e){e=vs(uu(e),0);var n=t?t.length:0;if(!n||1>e)return[];for(var r=0,o=-1,i=Array(ss(n/e));n>r;)i[++o]=_r(t,r,r+=e);return i}function No(t){for(var e=-1,n=t?t.length:0,r=-1,o=[];++e<n;){var i=t[e];i&&(o[++r]=i)}return o}function Mo(t,e,n){var r=t?t.length:0;return r?(e=n||e===K?1:uu(e),_r(t,0>e?0:e,r)):[]}function Vo(t,e,n){var r=t?t.length:0;return r?(e=n||e===K?1:uu(e),e=r-e,_r(t,0,0>e?0:e)):[]}function Xo(t,e){return t&&t.length?Or(t,fo(e,3),!0,!0):[]}function Po(t,e){return t&&t.length?Or(t,fo(e,3),!0):[]}function Do(t,e,n,r){var o=t?t.length:0;return o?(n&&"number"!=typeof n&&ko(t,e,n)&&(n=0,r=o),Hn(t,e,n,r)):[]}function Yo(t,e){return t&&t.length?w(t,fo(e,3)):-1}function zo(t,e){return t&&t.length?w(t,fo(e,3),!0):-1}function Go(t){var e=t?t.length:0;return e?Mn(t,1):[]}function Wo(t){var e=t?t.length:0;return e?Mn(t,gt):[]}function Zo(t,e){var n=t?t.length:0;return n?(e=e===K?1:uu(e),Mn(t,e)):[]}function $o(t){for(var e=-1,n=t?t.length:0,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r}function Uo(t){return t?t[0]:K}function Fo(t,e,n){var r=t?t.length:0;return r?(n=uu(n),0>n&&(n=vs(r+n,0)),b(t,e,n)):-1}function Ko(t){return Vo(t,1)}function qo(t,e){return t?hs.call(t,e):""}function Qo(t){var e=t?t.length:0;return e?t[e-1]:K}function Jo(t,e,n){var r=t?t.length:0;if(!r)return-1;var o=r;if(n!==K&&(o=uu(n),o=(0>o?vs(r+o,0):ds(o,r-1))+1),e!==e)return X(t,o,!0);for(;o--;)if(t[o]===e)return o;return-1}function ti(t,e){return t&&t.length&&e&&e.length?fr(t,e):t}function ei(t,e,n){return t&&t.length&&e&&e.length?hr(t,e,fo(n)):t}function ni(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],i=t.length;for(e=fo(e,3);++r<i;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}return pr(t,o),n}function ri(t){return t?Es.call(t):t}function oi(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&ko(t,e,n)?(e=0,n=r):(e=null==e?0:uu(e),n=n===K?r:uu(n)),_r(t,e,n)):[]}function ii(t,e){return yr(t,e)}function ai(t,e,n){return gr(t,e,fo(n))}function ui(t,e){var n=t?t.length:0;if(n){var r=yr(t,e);if(n>r&&ga(t[r],e))return r}return-1}function ci(t,e){return yr(t,e,!0)}function si(t,e,n){return gr(t,e,fo(n),!0)}function li(t,e){var n=t?t.length:0;if(n){var r=yr(t,e,!0)-1;if(ga(t[r],e))return r}return-1}function fi(t){return t&&t.length?wr(t):[]}function hi(t,e){return t&&t.length?br(t,fo(e)):[]}function pi(t){return Mo(t,1)}function vi(t,e,n){return t&&t.length?(e=n||e===K?1:uu(e),_r(t,0,0>e?0:e)):[]}function di(t,e,n){var r=t?t.length:0;return r?(e=n||e===K?1:uu(e),e=r-e,_r(t,0>e?0:e,r)):[]}function mi(t,e){return t&&t.length?Or(t,fo(e,3),!1,!0):[]}function _i(t,e){return t&&t.length?Or(t,fo(e,3)):[]}function Ei(t){return t&&t.length?kr(t):[]}function yi(t,e){return t&&t.length?kr(t,fo(e)):[]}function gi(t,e){return t&&t.length?kr(t,K,e):[]}function wi(t){if(!t||!t.length)return[];var e=0;return t=f(t,function(t){return Ra(t)?(e=vs(t.length,e),!0):void 0}),R(e,function(e){return v(t,sr(e))})}function bi(t,e){if(!t||!t.length)return[];var n=wi(t);return null==e?n:v(n,function(t){return i(e,K,t)})}function ki(t,e){return Cr(t||[],e||[],un)}function Ti(t,e){return Cr(t||[],e||[],mr)}function Oi(t){var n=e(t);return n.__chain__=!0,n}function Ri(t,e){return e(t),t}function Li(t,e){return e(t)}function Ci(){return Oi(this)}function xi(){return new j(this.value(),this.__chain__)}function Ai(t){return this.map(t).flatten()}function Si(){this.__values__===K&&(this.__values__=au(this.value()));var t=this.__index__>=this.__values__.length,e=t?K:this.__values__[this.__index__++];return{done:t,value:e}}function ji(){return this}function Hi(t){for(var e,r=this;r instanceof n;){var o=Bo(r);o.__index__=0,o.__values__=K,e?i.__wrapped__=o:e=o;var i=o;r=r.__wrapped__}return i.__wrapped__=t,e}function Bi(){var t=this.__wrapped__;if(t instanceof Re){var e=t;return this.__actions__.length&&(e=new Re(this)),e=e.reverse(),e.__actions__.push({func:Li,args:[ri],thisArg:K}),new j(e,this.__chain__)}return this.thru(ri)}function Ii(){return Rr(this.__wrapped__,this.__actions__)}function Ni(t,e,n){var r=wl(t)?l:jn;return n&&ko(t,e,n)&&(e=K),r(t,fo(e,3))}function Mi(t,e){var n=wl(t)?f:Bn;return n(t,fo(e,3))}function Vi(t,e){if(e=fo(e,3),wl(t)){var n=w(t,e);return n>-1?t[n]:K}return g(t,e,Ss)}function Xi(t,e){if(e=fo(e,3),wl(t)){var n=w(t,e,!0);return n>-1?t[n]:K}return g(t,e,js)}function Pi(t,e){return Mn(Gi(t,e),1)}function Di(t,e){return"function"==typeof e&&wl(t)?c(t,e):Ss(t,wn(e))}function Yi(t,e){return"function"==typeof e&&wl(t)?s(t,e):js(t,wn(e))}function zi(t,e,n,r){t=Oa(t)?t:Vu(t),n=n&&!r?uu(n):0;var o=t.length;return 0>n&&(n=vs(o+n,0)),Qa(t)?o>=n&&t.indexOf(e,n)>-1:!!o&&b(t,e,n)>-1}function Gi(t,e){var n=wl(t)?v:er;return n(t,fo(e,3))}function Wi(t,e,n,r){return null==t?[]:(wl(e)||(e=null==e?[]:[e]),n=r?K:n,wl(n)||(n=null==n?[]:[n]),ar(t,e,n))}function Zi(t,e,n){var r=wl(t)?m:k,o=arguments.length<3;return r(t,fo(e,4),n,o,Ss)}function $i(t,e,n){var r=wl(t)?_:k,o=arguments.length<3;return r(t,fo(e,4),n,o,js)}function Ui(t,e){var n=wl(t)?f:Bn;return e=fo(e,3),n(t,function(t,n,r){return!e(t,n,r)})}function Fi(t){var e=Oa(t)?t:Vu(t),n=e.length;return n>0?e[vr(0,n-1)]:K}function Ki(t,e){var n=-1,r=au(t),o=r.length,i=o-1;for(e=kn(uu(e),0,o);++n<e;){var a=vr(n,i),u=r[a];r[a]=r[n],r[n]=u}return r.length=e,r}function qi(t){return Ki(t,Tt)}function Qi(t){if(null==t)return 0;if(Oa(t)){var e=t.length;return e&&Qa(t)?Z(t):e}return Ou(t).length}function Ji(t,e,n){var r=wl(t)?E:Er;return n&&ko(t,e,n)&&(e=K),r(t,fo(e,3))}function ta(t,e){if("function"!=typeof e)throw new Pc(Et);return t=uu(t),function(){return--t<1?e.apply(this,arguments):void 0}}function ea(t,e,n){return e=n?K:e,e=t&&null==e?t.length:e,ao(t,it,K,K,K,K,e)}function na(t,e){var n;if("function"!=typeof e)throw new Pc(Et);return t=uu(t),function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=K),n}}function ra(t,e,n){e=n?K:e;var r=ao(t,et,K,K,K,K,K,e);return r.placeholder=ra.placeholder,r}function oa(t,e,n){e=n?K:e;var r=ao(t,nt,K,K,K,K,K,e);return r.placeholder=oa.placeholder,r}function ia(t,e,n){function r(){v&&ts(v),l&&ts(l),m=0,s=l=p=v=d=K}function o(e,n){n&&ts(n),l=v=d=K,e&&(m=hl(),f=t.apply(p,s),v||l||(s=p=K))}function i(){var t=e-(hl()-h);0>=t||t>e?o(d,l):v=us(i,t)}function a(){return(v&&d||l&&y)&&(f=t.apply(p,s)),r(),f}function u(){o(y,v)}function c(){if(s=arguments,h=hl(),p=this,d=y&&(v||!_),E===!1)var n=_&&!v;else{m||l||_||(m=h);var r=E-(h-m),o=(0>=r||r>E)&&(_||l);o?(l&&(l=ts(l)),m=h,f=t.apply(p,s)):l||(l=us(u,r))}return o&&v?v=ts(v):v||e===E||(v=us(i,e)),n&&(o=!0,f=t.apply(p,s)),!o||v||l||(s=p=K),f}var s,l,f,h,p,v,d,m=0,_=!1,E=!1,y=!0;if("function"!=typeof t)throw new Pc(Et);return e=su(e)||0,Va(n)&&(_=!!n.leading,E="maxWait"in n&&vs(su(n.maxWait)||0,e),y="trailing"in n?!!n.trailing:y),c.cancel=r,c.flush=a,c}function aa(t){return ao(t,ut)}function ua(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Pc(Et);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new ua.Cache,n}function ca(t){if("function"!=typeof t)throw new Pc(Et);return function(){return!t.apply(this,arguments)}}function sa(t){return na(2,t)}function la(t,e){if("function"!=typeof t)throw new Pc(Et);return e=vs(e===K?t.length-1:uu(e),0),function(){for(var n=arguments,r=-1,o=vs(n.length-e,0),a=Array(o);++r<o;)a[r]=n[e+r];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var u=Array(e+1);for(r=-1;++r<e;)u[r]=n[r];return u[e]=a,i(t,this,u)}}function fa(t,e){if("function"!=typeof t)throw new Pc(Et);return e=e===K?0:vs(uu(e),0),la(function(n){var r=n[e],o=n.slice(0,e);return r&&d(o,r),i(t,this,o)})}function ha(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new Pc(Et);return Va(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),ia(t,e,{leading:r,maxWait:e,trailing:o})}function pa(t){return ea(t,1)}function va(t,e){return e=null==e?vc:e,El(e,t)}function da(){if(!arguments.length)return[];var t=arguments[0];return wl(t)?t:[t]}function ma(t){return Tn(t)}function _a(t,e){return Tn(t,!1,e)}function Ea(t){return Tn(t,!0)}function ya(t,e){return Tn(t,!0,e)}function ga(t,e){return t===e||t!==t&&e!==e}function wa(t,e){return t>e}function ba(t,e){return t>=e}function ka(t){return Ra(t)&&Gc.call(t,"callee")&&(!as.call(t,"callee")||$c.call(t)==Ct)}function Ta(t){return Xa(t)&&$c.call(t)==Gt}function Oa(t){return null!=t&&!("function"==typeof t&&Ia(t))&&Ma(Vs(t))}function Ra(t){return Xa(t)&&Oa(t)}function La(t){return t===!0||t===!1||Xa(t)&&$c.call(t)==At}function Ca(t){return Xa(t)&&$c.call(t)==St}function xa(t){return!!t&&1===t.nodeType&&Xa(t)&&!Ua(t)}function Aa(t){if(Oa(t)&&(wl(t)||Qa(t)||Ia(t.splice)||ka(t)))return!t.length;for(var e in t)if(Gc.call(t,e))return!1;return!0}function Sa(t,e){return Fn(t,e)}function ja(t,e,n){n="function"==typeof n?n:K;var r=n?n(t,e):K;return r===K?Fn(t,e,n):!!r}function Ha(t){return Xa(t)?$c.call(t)==jt||"string"==typeof t.message&&"string"==typeof t.name:!1}function Ba(t){return"number"==typeof t&&fs(t)}function Ia(t){var e=Va(t)?$c.call(t):"";return e==Ht||e==Bt}function Na(t){return"number"==typeof t&&t==uu(t)}function Ma(t){return"number"==typeof t&&t>-1&&t%1==0&&wt>=t}function Va(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Xa(t){return!!t&&"object"==typeof t}function Pa(t){return Xa(t)&&mo(t)==It}function Da(t,e){return t===e||qn(t,e,ho(e))}function Ya(t,e,n){return n="function"==typeof n?n:K,qn(t,e,ho(e),n)}function za(t){return $a(t)&&t!=+t}function Ga(t){return null==t?!1:Ia(t)?Fc.test(zc.call(t)):Xa(t)&&(P(t)?Fc:Te).test(t)}function Wa(t){return null===t}function Za(t){return null==t}function $a(t){return"number"==typeof t||Xa(t)&&$c.call(t)==Nt}function Ua(t){if(!Xa(t)||$c.call(t)!=Mt||P(t))return!1;var e=ns(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&zc.call(n)==Zc}function Fa(t){return Va(t)&&$c.call(t)==Vt}function Ka(t){return Na(t)&&t>=-wt&&wt>=t}function qa(t){return Xa(t)&&mo(t)==Xt}function Qa(t){return"string"==typeof t||!wl(t)&&Xa(t)&&$c.call(t)==Pt}function Ja(t){return"symbol"==typeof t||Xa(t)&&$c.call(t)==Dt}function tu(t){return Xa(t)&&Ma(t.length)&&!!yn[$c.call(t)]}function eu(t){return t===K}function nu(t){return Xa(t)&&mo(t)==Yt}function ru(t){return Xa(t)&&$c.call(t)==zt}function ou(t,e){return e>t}function iu(t,e){return e>=t}function au(t){if(!t)return[];if(Oa(t))return Qa(t)?$(t):Vr(t);if(os&&t[os])return Y(t[os]());var e=mo(t),n=e==It?z:e==Xt?W:Vu;return n(t)}function uu(t){if(!t)return 0===t?t:0;if(t=su(t),t===gt||t===-gt){var e=0>t?-1:1;return e*bt}var n=t%1;return t===t?n?t-n:t:0}function cu(t){return t?kn(uu(t),0,Tt):0}function su(t){if(Va(t)){var e=Ia(t.valueOf)?t.valueOf():t;t=Va(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(de,"");var n=ke.test(t);return n||Oe.test(t)?Ln(t.slice(2),n?2:8):be.test(t)?kt:+t}function lu(t){return Xr(t,Ru(t))}function fu(t){return kn(uu(t),-wt,wt)}function hu(t){if("string"==typeof t)return t;if(null==t)return"";if(Ja(t))return Qc?xs.call(t):"";var e=t+"";return"0"==e&&1/t==-gt?"-0":e}function pu(t,e){var n=Cn(t);return e?sn(n,e):n}function vu(t,e){return g(t,fo(e,3),Xn,!0)}function du(t,e){return g(t,fo(e,3),Pn,!0)}function mu(t,e){return null==t?t:Hs(t,wn(e),Ru)}function _u(t,e){return null==t?t:Bs(t,wn(e),Ru)}function Eu(t,e){return t&&Xn(t,wn(e))}function yu(t,e){return t&&Pn(t,wn(e))}function gu(t){return null==t?[]:Dn(t,Ou(t))}function wu(t){return null==t?[]:Dn(t,Ru(t))}function bu(t,e,n){var r=null==t?K:Yn(t,e);return r===K?n:r}function ku(t,e){return Eo(t,e,zn)}function Tu(t,e){return Eo(t,e,Gn)}function Ou(t){var e=Lo(t);if(!e&&!Oa(t))return Jn(t);var n=bo(t),r=!!n,o=n||[],i=o.length;for(var a in t)!zn(t,a)||r&&("length"==a||D(a,i))||e&&"constructor"==a||o.push(a);return o}function Ru(t){for(var e=-1,n=Lo(t),r=tr(t),o=r.length,i=bo(t),a=!!i,u=i||[],c=u.length;++e<o;){var s=r[e];a&&("length"==s||D(s,c))||"constructor"==s&&(n||!Gc.call(t,s))||u.push(s)}return u}function Lu(t,e){var n={};return e=fo(e,3),Xn(t,function(t,r,o){n[e(t,r,o)]=t}),n}function Cu(t,e){var n={};return e=fo(e,3),Xn(t,function(t,r,o){n[r]=e(t,r,o)}),n}function xu(t,e){return e=fo(e),cr(t,function(t,n){return!e(t,n)})}function Au(t,e){return null==t?{}:cr(t,fo(e))}function Su(t,e,n){if(To(e,t))r=null==t?K:t[e];else{e=bn(e);var r=bu(t,e);t=So(t,e)}return r===K&&(r=n),Ia(r)?r.call(t):r}function ju(t,e,n){return null==t?t:mr(t,e,n)}function Hu(t,e,n,r){return r="function"==typeof r?r:K,null==t?t:mr(t,e,n,r)}function Bu(t){return L(t,Ou(t))}function Iu(t){return L(t,Ru(t))}function Nu(t,e,n){var r=wl(t)||tu(t);if(e=fo(e,4),null==n)if(r||Va(t)){var o=t.constructor;n=r?wl(t)?new o:[]:Ia(o)?Cn(ns(t)):{}}else n={};return(r?c:Xn)(t,function(t,r,o){return e(n,t,r,o)}),n}function Mu(t,e){return null==t?!0:Tr(t,e)}function Vu(t){return t?x(t,Ou(t)):[]}function Xu(t){return null==t?[]:x(t,Ru(t))}function Pu(t,e,n){return n===K&&(n=e,e=K),n!==K&&(n=su(n),n=n===n?n:0),e!==K&&(e=su(e),e=e===e?e:0),kn(su(t),e,n)}function Du(t,e,n){return e=su(e)||0,n===K?(n=e,e=0):n=su(n)||0,t=su(t),Wn(t,e,n)}function Yu(t,e,n){if(n&&"boolean"!=typeof n&&ko(t,e,n)&&(e=n=K),n===K&&("boolean"==typeof e?(n=e,e=K):"boolean"==typeof t&&(n=t,t=K)),t===K&&e===K?(t=0,e=1):(t=su(t)||0,e===K?(e=t,t=0):e=su(e)||0),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=_s();return ds(t+o*(e-t+Rn("1e-"+((o+"").length-1))),e)}return vr(t,e)}function zu(t){return Dl(hu(t).toLowerCase())}function Gu(t){return t=hu(t),t&&t.replace(Le,N).replace(fn,"")}function Wu(t,e,n){t=hu(t),e="string"==typeof e?e:e+"";var r=t.length;return n=n===K?r:kn(uu(n),0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function Zu(t){return t=hu(t),t&&ae.test(t)?t.replace(oe,M):t}function $u(t){return t=hu(t),t&&ve.test(t)?t.replace(pe,"\\$&"):t}function Uu(t,e,n){t=hu(t),e=uu(e);var r=Z(t);if(!e||r>=e)return t;var o=(e-r)/2,i=ls(o),a=ss(o);return eo("",i,n)+t+eo("",a,n)}function Fu(t,e,n){return t=hu(t),t+eo(t,e,n)}function Ku(t,e,n){return t=hu(t),eo(t,e,n)+t}function qu(t,e,n){return n||null==e?e=0:e&&(e=+e),t=hu(t).replace(de,""),ms(t,e||(we.test(t)?16:10))}function Qu(t,e){t=hu(t),e=uu(e);var n="";if(!t||1>e||e>wt)return n;do e%2&&(n+=t),e=ls(e/2),t+=t;while(e);return n}function Ju(){var t=arguments,e=hu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function tc(t,e,n){return hu(t).split(e,n)}function ec(t,e,n){return t=hu(t),n=kn(uu(n),0,t.length),t.lastIndexOf(e,n)==n}function nc(t,n,r){var o=e.templateSettings;r&&ko(t,n,r)&&(n=K),t=hu(t),n=Ol({},n,o,on);var i,a,u=Ol({},n.imports,o.imports,on),c=Ou(u),s=x(u,c),l=0,f=n.interpolate||Ce,h="__p += '",p=Xc((n.escape||Ce).source+"|"+f.source+"|"+(f===se?ye:Ce).source+"|"+(n.evaluate||Ce).source+"|$","g"),v="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++En+"]")+"\n";t.replace(p,function(e,n,r,o,u,c){return r||(r=o),h+=t.slice(l,c).replace(xe,V),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),u&&(a=!0,h+="';\n"+u+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+e.length,e}),h+="';\n";var d=n.variable;d||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(te,""):h).replace(ee,"$1").replace(ne,"$1;"),h="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Wl(function(){return Function(c,v+"return "+h).apply(K,s)});if(m.source=h,Ha(m))throw m;return m}function rc(t){return hu(t).toLowerCase()}function oc(t){return hu(t).toUpperCase()}function ic(t,e,n){if(t=hu(t),!t)return t;if(n||e===K)return t.replace(de,"");if(e+="",!e)return t;var r=$(t),o=$(e);return r.slice(A(r,o),S(r,o)+1).join("")}function ac(t,e,n){if(t=hu(t),!t)return t;if(n||e===K)return t.replace(_e,"");if(e+="",!e)return t;var r=$(t);return r.slice(0,S(r,$(e))+1).join("")}function uc(t,e,n){if(t=hu(t),!t)return t;if(n||e===K)return t.replace(me,"");if(e+="",!e)return t;var r=$(t);return r.slice(A(r,$(e))).join("")}function cc(t,e){var n=lt,r=ft;if(Va(e)){var o="separator"in e?e.separator:o;n="length"in e?uu(e.length):n,r="omission"in e?hu(e.omission):r}t=hu(t);var i=t.length;if(pn.test(t)){var a=$(t);i=a.length}if(n>=i)return t;var u=n-Z(r);if(1>u)return r;var c=a?a.slice(0,u).join(""):t.slice(0,u);if(o===K)return c+r;if(a&&(u+=c.length-u),Fa(o)){if(t.slice(u).search(o)){var s,l=c;for(o.global||(o=Xc(o.source,hu(ge.exec(o))+"g")),o.lastIndex=0;s=o.exec(l);)var f=s.index;c=c.slice(0,f===K?u:f)}}else if(t.indexOf(o,u)!=u){var h=c.lastIndexOf(o);h>-1&&(c=c.slice(0,h))}return c+r}function sc(t){return t=hu(t),t&&ie.test(t)?t.replace(re,U):t}function lc(t,e,n){return t=hu(t),e=n?K:e,e===K&&(e=mn.test(t)?dn:vn),t.match(e)||[]}function fc(t){var e=t?t.length:0,n=fo();return t=e?v(t,function(t){if("function"!=typeof t[1])throw new Pc(Et);return[n(t[0]),t[1]]}):[],la(function(n){for(var r=-1;++r<e;){var o=t[r];if(i(o[0],this,n))return i(o[1],this,n)}})}function hc(t){return On(Tn(t,!0))}function pc(t){return function(){return t}}function vc(t){return t}function dc(t){return Qn("function"==typeof t?t:Tn(t,!0))}function mc(t){return nr(Tn(t,!0))}function _c(t,e){return rr(t,Tn(e,!0))}function Ec(t,e,n){var r=Ou(e),o=Dn(e,r);null!=n||Va(e)&&(o.length||!r.length)||(n=e,e=t,t=this,o=Dn(e,Ou(e)));var i=Va(n)&&"chain"in n?n.chain:!0,a=Ia(t);return c(o,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__),o=n.__actions__=Vr(this.__actions__);return o.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,d([this.value()],arguments))})}),t}function yc(){return In._===this&&(In._=Uc),this}function gc(){}function wc(t){return t=uu(t),function(){return arguments[t]}}function bc(t){return To(t)?sr(t):lr(t)}function kc(t){return function(e){return null==t?K:Yn(t,e)}}function Tc(t,e){if(t=uu(t),1>t||t>wt)return[];var n=Tt,r=ds(t,Tt);e=wn(e),t-=Tt;for(var o=R(r,e);++n<t;)e(n);return o}function Oc(t){return wl(t)?v(t,String):Ho(t)}function Rc(t){var e=++Wc;return hu(t)+e}function Lc(t,e){var n;return t===K&&e===K?0:(t!==K&&(n=t),e!==K&&(n=n===K?e:n+e),n)}function Cc(t){return t&&t.length?y(t,vc,wa):K}function xc(t,e){return t&&t.length?y(t,fo(e),wa):K}function Ac(t){return Bc(t)/(t?t.length:0)}function Sc(t){return t&&t.length?y(t,vc,ou):K}function jc(t,e){return t&&t.length?y(t,fo(e),ou):K}function Hc(t,e){var n;return t===K&&e===K?0:(t!==K&&(n=t),e!==K&&(n=n===K?e:n-e),n)}function Bc(t){return t&&t.length?O(t,vc):0}function Ic(t,e){return t&&t.length?O(t,fo(e)):0}t=t?Nn.defaults({},t,Nn.pick(In,_n)):In;var Nc=t.Date,Mc=t.Error,Vc=t.Math,Xc=t.RegExp,Pc=t.TypeError,Dc=t.Array.prototype,Yc=t.Object.prototype,zc=t.Function.prototype.toString,Gc=Yc.hasOwnProperty,Wc=0,Zc=zc.call(Object),$c=Yc.toString,Uc=In._,Fc=Xc("^"+zc.call(Gc).replace(pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kc=An?t.Buffer:K,qc=t.Reflect,Qc=t.Symbol,Jc=t.Uint8Array,ts=t.clearTimeout,es=qc?qc.enumerate:K,ns=Object.getPrototypeOf,rs=Object.getOwnPropertySymbols,os="symbol"==typeof(os=Qc&&Qc.iterator)?os:K,is=Object.create,as=Yc.propertyIsEnumerable,us=t.setTimeout,cs=Dc.splice,ss=Vc.ceil,ls=Vc.floor,fs=t.isFinite,hs=Dc.join,ps=Object.keys,vs=Vc.max,ds=Vc.min,ms=t.parseInt,_s=Vc.random,Es=Dc.reverse,ys=po(t,"Map"),gs=po(t,"Set"),ws=po(t,"WeakMap"),bs=po(Object,"create"),ks=ws&&new ws,Ts=ys?zc.call(ys):"",Os=gs?zc.call(gs):"",Rs=ws?zc.call(ws):"",Ls=Qc?Qc.prototype:K,Cs=Qc?Ls.valueOf:K,xs=Qc?Ls.toString:K,As={};e.templateSettings={escape:ue,evaluate:ce,interpolate:se,variable:"",imports:{_:e}};var Ss=Gr(Xn),js=Gr(Pn,!0),Hs=Wr(),Bs=Wr(!0);es&&!as.call({valueOf:1},"valueOf")&&(tr=function(t){return Y(es(t))});var Is=ks?function(t,e){return ks.set(t,e),t}:vc,Ns=gs&&2===new gs([1,2]).size?function(t){return new gs(t)}:gc,Ms=ks?function(t){return ks.get(t)}:gc,Vs=sr("length"),Xs=rs||function(){return[]};(ys&&mo(new ys)!=It||gs&&mo(new gs)!=Xt||ws&&mo(new ws)!=Yt)&&(mo=function(t){var e=$c.call(t),n=e==Mt?t.constructor:null,r="function"==typeof n?zc.call(n):"";if(r)switch(r){case Ts:return It;case Os:return Xt;case Rs:return Yt}return e});var Ps=function(){var t=0,e=0;return function(n,r){var o=hl(),i=pt-(o-e);if(e=o,i>0){if(++t>=ht)return n}else t=0;return Is(n,r)}}(),Ds=la(function(t,e){return wl(t)||(t=null==t?[]:[Object(t)]),e=Mn(e,1),u(t,e)}),Ys=la(function(t,e){return Ra(t)?Sn(t,Mn(e,1,!0)):[]}),zs=la(function(t,e){var n=Qo(e);return Ra(n)&&(n=K),Ra(t)?Sn(t,Mn(e,1,!0),fo(n)):[]}),Gs=la(function(t,e){
var n=Qo(e);return Ra(n)&&(n=K),Ra(t)?Sn(t,Mn(e,1,!0),K,n):[]}),Ws=la(function(t){var e=v(t,hn);return e.length&&e[0]===t[0]?Zn(e):[]}),Zs=la(function(t){var e=Qo(t),n=v(t,hn);return e===Qo(n)?e=K:n.pop(),n.length&&n[0]===t[0]?Zn(n,fo(e)):[]}),$s=la(function(t){var e=Qo(t),n=v(t,hn);return e===Qo(n)?e=K:n.pop(),n.length&&n[0]===t[0]?Zn(n,K,e):[]}),Us=la(ti),Fs=la(function(t,e){e=v(Mn(e,1),String);var n=ln(t,e);return pr(t,e.sort(H)),n}),Ks=la(function(t){return kr(Mn(t,1,!0))}),qs=la(function(t){var e=Qo(t);return Ra(e)&&(e=K),kr(Mn(t,1,!0),fo(e))}),Qs=la(function(t){var e=Qo(t);return Ra(e)&&(e=K),kr(Mn(t,1,!0),K,e)}),Js=la(function(t,e){return Ra(t)?Sn(t,e):[]}),tl=la(function(t){return Lr(f(t,Ra))}),el=la(function(t){var e=Qo(t);return Ra(e)&&(e=K),Lr(f(t,Ra),fo(e))}),nl=la(function(t){var e=Qo(t);return Ra(e)&&(e=K),Lr(f(t,Ra),K,e)}),rl=la(wi),ol=la(function(t){var e=t.length,n=e>1?t[e-1]:K;return n="function"==typeof n?(t.pop(),n):K,bi(t,n)}),il=la(function(t){t=Mn(t,1);var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ln(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Re&&D(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:Li,args:[o],thisArg:K}),new j(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(K),t})):this.thru(o)}),al=Yr(function(t,e,n){Gc.call(t,n)?++t[n]:t[n]=1}),ul=Yr(function(t,e,n){Gc.call(t,n)?t[n].push(e):t[n]=[e]}),cl=la(function(t,e,n){var r=-1,o="function"==typeof e,a=To(e),u=Oa(t)?Array(t.length):[];return Ss(t,function(t){var c=o?e:a&&null!=t?t[e]:K;u[++r]=c?i(c,t,n):Un(t,e,n)}),u}),sl=Yr(function(t,e,n){t[n]=e}),ll=Yr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),fl=la(function(t,e){if(null==t)return[];var n=e.length;return n>1&&ko(t,e[0],e[1])?e=[]:n>2&&ko(e[0],e[1],e[2])&&(e.length=1),ar(t,Mn(e,1),[])}),hl=Nc.now,pl=la(function(t,e,n){var r=Q;if(n.length){var o=G(n,vo(pl));r|=rt}return ao(t,r,e,n,o)}),vl=la(function(t,e,n){var r=Q|J;if(n.length){var o=G(n,vo(vl));r|=rt}return ao(e,r,t,n,o)}),dl=la(function(t,e){return xn(t,1,e)}),ml=la(function(t,e,n){return xn(t,su(e)||0,n)}),_l=la(function(t,e){e=v(Mn(e,1),fo());var n=e.length;return la(function(r){for(var o=-1,a=ds(r.length,n);++o<a;)r[o]=e[o].call(this,r[o]);return i(t,this,r)})}),El=la(function(t,e){var n=G(e,vo(El));return ao(t,rt,K,e,n)}),yl=la(function(t,e){var n=G(e,vo(yl));return ao(t,ot,K,e,n)}),gl=la(function(t,e){return ao(t,at,K,K,K,Mn(e,1))}),wl=Array.isArray,bl=Kc?function(t){return t instanceof Kc}:pc(!1),kl=zr(function(t,e){Xr(e,Ou(e),t)}),Tl=zr(function(t,e){Xr(e,Ru(e),t)}),Ol=zr(function(t,e,n,r){Pr(e,Ru(e),t,r)}),Rl=zr(function(t,e,n,r){Pr(e,Ou(e),t,r)}),Ll=la(function(t,e){return ln(t,Mn(e,1))}),Cl=la(function(t){return t.push(K,on),i(Ol,K,t)}),xl=la(function(t){return t.push(K,Ao),i(Bl,K,t)}),Al=Jr(function(t,e,n){t[e]=n},pc(vc)),Sl=Jr(function(t,e,n){Gc.call(t,e)?t[e].push(n):t[e]=[n]},fo),jl=la(Un),Hl=zr(function(t,e,n){or(t,e,n)}),Bl=zr(function(t,e,n,r){or(t,e,n,r)}),Il=la(function(t,e){return null==t?{}:(e=v(Mn(e,1),String),ur(t,Sn(Ru(t),e)))}),Nl=la(function(t,e){return null==t?{}:ur(t,Mn(e,1))}),Ml=Ur(function(t,e,n){return e=e.toLowerCase(),t+(n?zu(e):e)}),Vl=Ur(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Xl=Ur(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Pl=$r("toLowerCase"),Dl=$r("toUpperCase"),Yl=Ur(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),zl=Ur(function(t,e,n){return t+(n?" ":"")+zu(e)}),Gl=Ur(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Wl=la(function(t,e){try{return i(t,K,e)}catch(n){return Ha(n)?n:new Mc(n)}}),Zl=la(function(t,e){return c(Mn(e,1),function(e){t[e]=pl(t[e],t)}),t}),$l=qr(),Ul=qr(!0),Fl=la(function(t,e){return function(n){return Un(n,t,e)}}),Kl=la(function(t,e){return function(n){return Un(t,n,e)}}),ql=to(v),Ql=to(l),Jl=to(E),tf=ro(),ef=ro(!0),nf=io("ceil"),rf=io("floor"),of=io("round");return e.prototype=n.prototype,j.prototype=Cn(n.prototype),j.prototype.constructor=j,Re.prototype=Cn(n.prototype),Re.prototype.constructor=Re,He.prototype=bs?bs(null):Yc,Ve.prototype.clear=Xe,Ve.prototype["delete"]=Pe,Ve.prototype.get=De,Ve.prototype.has=Ye,Ve.prototype.set=ze,Ge.prototype.push=Ze,$e.prototype.clear=Ue,$e.prototype["delete"]=Fe,$e.prototype.get=Ke,$e.prototype.has=qe,$e.prototype.set=Qe,ua.Cache=Ve,e.after=ta,e.ary=ea,e.assign=kl,e.assignIn=Tl,e.assignInWith=Ol,e.assignWith=Rl,e.at=Ll,e.before=na,e.bind=pl,e.bindAll=Zl,e.bindKey=vl,e.castArray=da,e.chain=Oi,e.chunk=Io,e.compact=No,e.concat=Ds,e.cond=fc,e.conforms=hc,e.constant=pc,e.countBy=al,e.create=pu,e.curry=ra,e.curryRight=oa,e.debounce=ia,e.defaults=Cl,e.defaultsDeep=xl,e.defer=dl,e.delay=ml,e.difference=Ys,e.differenceBy=zs,e.differenceWith=Gs,e.drop=Mo,e.dropRight=Vo,e.dropRightWhile=Xo,e.dropWhile=Po,e.fill=Do,e.filter=Mi,e.flatMap=Pi,e.flatten=Go,e.flattenDeep=Wo,e.flattenDepth=Zo,e.flip=aa,e.flow=$l,e.flowRight=Ul,e.fromPairs=$o,e.functions=gu,e.functionsIn=wu,e.groupBy=ul,e.initial=Ko,e.intersection=Ws,e.intersectionBy=Zs,e.intersectionWith=$s,e.invert=Al,e.invertBy=Sl,e.invokeMap=cl,e.iteratee=dc,e.keyBy=sl,e.keys=Ou,e.keysIn=Ru,e.map=Gi,e.mapKeys=Lu,e.mapValues=Cu,e.matches=mc,e.matchesProperty=_c,e.memoize=ua,e.merge=Hl,e.mergeWith=Bl,e.method=Fl,e.methodOf=Kl,e.mixin=Ec,e.negate=ca,e.nthArg=wc,e.omit=Il,e.omitBy=xu,e.once=sa,e.orderBy=Wi,e.over=ql,e.overArgs=_l,e.overEvery=Ql,e.overSome=Jl,e.partial=El,e.partialRight=yl,e.partition=ll,e.pick=Nl,e.pickBy=Au,e.property=bc,e.propertyOf=kc,e.pull=Us,e.pullAll=ti,e.pullAllBy=ei,e.pullAt=Fs,e.range=tf,e.rangeRight=ef,e.rearg=gl,e.reject=Ui,e.remove=ni,e.rest=la,e.reverse=ri,e.sampleSize=Ki,e.set=ju,e.setWith=Hu,e.shuffle=qi,e.slice=oi,e.sortBy=fl,e.sortedUniq=fi,e.sortedUniqBy=hi,e.split=tc,e.spread=fa,e.tail=pi,e.take=vi,e.takeRight=di,e.takeRightWhile=mi,e.takeWhile=_i,e.tap=Ri,e.throttle=ha,e.thru=Li,e.toArray=au,e.toPairs=Bu,e.toPairsIn=Iu,e.toPath=Oc,e.toPlainObject=lu,e.transform=Nu,e.unary=pa,e.union=Ks,e.unionBy=qs,e.unionWith=Qs,e.uniq=Ei,e.uniqBy=yi,e.uniqWith=gi,e.unset=Mu,e.unzip=wi,e.unzipWith=bi,e.values=Vu,e.valuesIn=Xu,e.without=Js,e.words=lc,e.wrap=va,e.xor=tl,e.xorBy=el,e.xorWith=nl,e.zip=rl,e.zipObject=ki,e.zipObjectDeep=Ti,e.zipWith=ol,e.extend=Tl,e.extendWith=Ol,Ec(e,e),e.add=Lc,e.attempt=Wl,e.camelCase=Ml,e.capitalize=zu,e.ceil=nf,e.clamp=Pu,e.clone=ma,e.cloneDeep=Ea,e.cloneDeepWith=ya,e.cloneWith=_a,e.deburr=Gu,e.endsWith=Wu,e.eq=ga,e.escape=Zu,e.escapeRegExp=$u,e.every=Ni,e.find=Vi,e.findIndex=Yo,e.findKey=vu,e.findLast=Xi,e.findLastIndex=zo,e.findLastKey=du,e.floor=rf,e.forEach=Di,e.forEachRight=Yi,e.forIn=mu,e.forInRight=_u,e.forOwn=Eu,e.forOwnRight=yu,e.get=bu,e.gt=wa,e.gte=ba,e.has=ku,e.hasIn=Tu,e.head=Uo,e.identity=vc,e.includes=zi,e.indexOf=Fo,e.inRange=Du,e.invoke=jl,e.isArguments=ka,e.isArray=wl,e.isArrayBuffer=Ta,e.isArrayLike=Oa,e.isArrayLikeObject=Ra,e.isBoolean=La,e.isBuffer=bl,e.isDate=Ca,e.isElement=xa,e.isEmpty=Aa,e.isEqual=Sa,e.isEqualWith=ja,e.isError=Ha,e.isFinite=Ba,e.isFunction=Ia,e.isInteger=Na,e.isLength=Ma,e.isMap=Pa,e.isMatch=Da,e.isMatchWith=Ya,e.isNaN=za,e.isNative=Ga,e.isNil=Za,e.isNull=Wa,e.isNumber=$a,e.isObject=Va,e.isObjectLike=Xa,e.isPlainObject=Ua,e.isRegExp=Fa,e.isSafeInteger=Ka,e.isSet=qa,e.isString=Qa,e.isSymbol=Ja,e.isTypedArray=tu,e.isUndefined=eu,e.isWeakMap=nu,e.isWeakSet=ru,e.join=qo,e.kebabCase=Vl,e.last=Qo,e.lastIndexOf=Jo,e.lowerCase=Xl,e.lowerFirst=Pl,e.lt=ou,e.lte=iu,e.max=Cc,e.maxBy=xc,e.mean=Ac,e.min=Sc,e.minBy=jc,e.noConflict=yc,e.noop=gc,e.now=hl,e.pad=Uu,e.padEnd=Fu,e.padStart=Ku,e.parseInt=qu,e.random=Yu,e.reduce=Zi,e.reduceRight=$i,e.repeat=Qu,e.replace=Ju,e.result=Su,e.round=of,e.runInContext=F,e.sample=Fi,e.size=Qi,e.snakeCase=Yl,e.some=Ji,e.sortedIndex=ii,e.sortedIndexBy=ai,e.sortedIndexOf=ui,e.sortedLastIndex=ci,e.sortedLastIndexBy=si,e.sortedLastIndexOf=li,e.startCase=zl,e.startsWith=ec,e.subtract=Hc,e.sum=Bc,e.sumBy=Ic,e.template=nc,e.times=Tc,e.toInteger=uu,e.toLength=cu,e.toLower=rc,e.toNumber=su,e.toSafeInteger=fu,e.toString=hu,e.toUpper=oc,e.trim=ic,e.trimEnd=ac,e.trimStart=uc,e.truncate=cc,e.unescape=sc,e.uniqueId=Rc,e.upperCase=Gl,e.upperFirst=Dl,e.each=Di,e.eachRight=Yi,e.first=Uo,Ec(e,function(){var t={};return Xn(e,function(n,r){Gc.call(e.prototype,r)||(t[r]=n)}),t}(),{chain:!1}),e.VERSION=q,c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),c(["drop","take"],function(t,e){Re.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new Re(this);n=n===K?1:vs(uu(n),0);var o=this.clone();return r?o.__takeCount__=ds(n,o.__takeCount__):o.__views__.push({size:ds(n,Tt),type:t+(o.__dir__<0?"Right":"")}),o},Re.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),c(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==dt||n==_t;Re.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:fo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),c(["head","last"],function(t,e){var n="take"+(e?"Right":"");Re.prototype[t]=function(){return this[n](1).value()[0]}}),c(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Re.prototype[t]=function(){return this.__filtered__?new Re(this):this[n](1)}}),Re.prototype.compact=function(){return this.filter(vc)},Re.prototype.find=function(t){return this.filter(t).head()},Re.prototype.findLast=function(t){return this.reverse().find(t)},Re.prototype.invokeMap=la(function(t,e){return"function"==typeof t?new Re(this):this.map(function(n){return Un(n,t,e)})}),Re.prototype.reject=function(t){return t=fo(t,3),this.filter(function(e){return!t(e)})},Re.prototype.slice=function(t,e){t=uu(t);var n=this;return n.__filtered__&&(t>0||0>e)?new Re(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==K&&(e=uu(e),n=0>e?n.dropRight(-e):n.take(e-t)),n)},Re.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Re.prototype.toArray=function(){return this.take(Tt)},Xn(Re.prototype,function(t,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),o=/^(?:head|last)$/.test(n),i=e[o?"take"+("last"==n?"Right":""):n],a=o||/^find/.test(n);i&&(e.prototype[n]=function(){var n=this.__wrapped__,u=o?[1]:arguments,c=n instanceof Re,s=u[0],l=c||wl(n),f=function(t){var n=i.apply(e,d([t],u));return o&&h?n[0]:n};l&&r&&"function"==typeof s&&1!=s.length&&(c=l=!1);var h=this.__chain__,p=!!this.__actions__.length,v=a&&!h,m=c&&!p;if(!a&&l){n=m?n:new Re(this);var _=t.apply(n,u);return _.__actions__.push({func:Li,args:[f],thisArg:K}),new j(_,h)}return v&&m?t.apply(this,u):(_=this.thru(f),v?o?_.value()[0]:_.value():_)})}),c(["pop","push","shift","sort","splice","unshift"],function(t){var n=Dc[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return o&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Xn(Re.prototype,function(t,n){var r=e[n];if(r){var o=r.name+"",i=As[o]||(As[o]=[]);i.push({name:n,func:r})}}),As[Qr(K,J).name]=[{name:"wrapper",func:K}],Re.prototype.clone=Ae,Re.prototype.reverse=Se,Re.prototype.value=je,e.prototype.at=il,e.prototype.chain=Ci,e.prototype.commit=xi,e.prototype.flatMap=Ai,e.prototype.next=Si,e.prototype.plant=Hi,e.prototype.reverse=Bi,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Ii,os&&(e.prototype[os]=ji),e}var K,q="4.5.1",Q=1,J=2,tt=4,et=8,nt=16,rt=32,ot=64,it=128,at=256,ut=512,ct=1,st=2,lt=30,ft="...",ht=150,pt=16,vt=200,dt=1,mt=2,_t=3,Et="Expected a function",yt="__lodash_hash_undefined__",gt=1/0,wt=9007199254740991,bt=1.7976931348623157e308,kt=NaN,Tt=4294967295,Ot=Tt-1,Rt=Tt>>>1,Lt="__lodash_placeholder__",Ct="[object Arguments]",xt="[object Array]",At="[object Boolean]",St="[object Date]",jt="[object Error]",Ht="[object Function]",Bt="[object GeneratorFunction]",It="[object Map]",Nt="[object Number]",Mt="[object Object]",Vt="[object RegExp]",Xt="[object Set]",Pt="[object String]",Dt="[object Symbol]",Yt="[object WeakMap]",zt="[object WeakSet]",Gt="[object ArrayBuffer]",Wt="[object Float32Array]",Zt="[object Float64Array]",$t="[object Int8Array]",Ut="[object Int16Array]",Ft="[object Int32Array]",Kt="[object Uint8Array]",qt="[object Uint8ClampedArray]",Qt="[object Uint16Array]",Jt="[object Uint32Array]",te=/\b__p \+= '';/g,ee=/\b(__p \+=) '' \+/g,ne=/(__e\(.*?\)|\b__t\)) \+\n'';/g,re=/&(?:amp|lt|gt|quot|#39|#96);/g,oe=/[&<>"'`]/g,ie=RegExp(re.source),ae=RegExp(oe.source),ue=/<%-([\s\S]+?)%>/g,ce=/<%([\s\S]+?)%>/g,se=/<%=([\s\S]+?)%>/g,le=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fe=/^\w*$/,he=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,pe=/[\\^$.*+?()[\]{}|]/g,ve=RegExp(pe.source),de=/^\s+|\s+$/g,me=/^\s+/,_e=/\s+$/,Ee=/\\(\\)?/g,ye=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,we=/^0x/i,be=/^[-+]0x[0-9a-f]+$/i,ke=/^0b[01]+$/i,Te=/^\[object .+?Constructor\]$/,Oe=/^0o[0-7]+$/i,Re=/^(?:0|[1-9]\d*)$/,Le=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ce=/($^)/,xe=/['\n\r\u2028\u2029\\]/g,Ae="\\ud800-\\udfff",Se="\\u0300-\\u036f\\ufe20-\\ufe23",je="\\u20d0-\\u20f0",He="\\u2700-\\u27bf",Be="a-z\\xdf-\\xf6\\xf8-\\xff",Ie="\\xac\\xb1\\xd7\\xf7",Ne="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Me="\\u2018\\u2019\\u201c\\u201d",Ve=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xe="A-Z\\xc0-\\xd6\\xd8-\\xde",Pe="\\ufe0e\\ufe0f",De=Ie+Ne+Me+Ve,Ye="["+Ae+"]",ze="["+De+"]",Ge="["+Se+je+"]",We="\\d+",Ze="["+He+"]",$e="["+Be+"]",Ue="[^"+Ae+De+We+He+Be+Xe+"]",Fe="\\ud83c[\\udffb-\\udfff]",Ke="(?:"+Ge+"|"+Fe+")",qe="[^"+Ae+"]",Qe="(?:\\ud83c[\\udde6-\\uddff]){2}",Je="[\\ud800-\\udbff][\\udc00-\\udfff]",tn="["+Xe+"]",en="\\u200d",nn="(?:"+$e+"|"+Ue+")",rn="(?:"+tn+"|"+Ue+")",on=Ke+"?",an="["+Pe+"]?",un="(?:"+en+"(?:"+[qe,Qe,Je].join("|")+")"+an+on+")*",cn=an+on+un,sn="(?:"+[Ze,Qe,Je].join("|")+")"+cn,ln="(?:"+[qe+Ge+"?",Ge,Qe,Je,Ye].join("|")+")",fn=RegExp(Ge,"g"),hn=RegExp(Fe+"(?="+Fe+")|"+ln+cn,"g"),pn=RegExp("["+en+Ae+Se+je+Pe+"]"),vn=/[a-zA-Z0-9]+/g,dn=RegExp([tn+"?"+$e+"+(?="+[ze,tn,"$"].join("|")+")",rn+"+(?="+[ze,tn+nn,"$"].join("|")+")",tn+"?"+nn+"+",tn+"+",We,sn].join("|"),"g"),mn=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_n=["Array","Buffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],En=-1,yn={};yn[Wt]=yn[Zt]=yn[$t]=yn[Ut]=yn[Ft]=yn[Kt]=yn[qt]=yn[Qt]=yn[Jt]=!0,yn[Ct]=yn[xt]=yn[Gt]=yn[At]=yn[St]=yn[jt]=yn[Ht]=yn[It]=yn[Nt]=yn[Mt]=yn[Vt]=yn[Xt]=yn[Pt]=yn[Yt]=!1;var gn={};gn[Ct]=gn[xt]=gn[Gt]=gn[At]=gn[St]=gn[Wt]=gn[Zt]=gn[$t]=gn[Ut]=gn[Ft]=gn[It]=gn[Nt]=gn[Mt]=gn[Vt]=gn[Xt]=gn[Pt]=gn[Dt]=gn[Kt]=gn[qt]=gn[Qt]=gn[Jt]=!0,gn[jt]=gn[Ht]=gn[Yt]=!1;var wn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},bn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},kn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Tn={"function":!0,object:!0},On={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Rn=parseFloat,Ln=parseInt,Cn=Tn[typeof n]&&n&&!n.nodeType?n:K,xn=Tn[typeof e]&&e&&!e.nodeType?e:K,An=xn&&xn.exports===Cn?Cn:K,Sn=j(Cn&&xn&&"object"==typeof t&&t),jn=j(Tn[typeof self]&&self),Hn=j(Tn[typeof window]&&window),Bn=j(Tn[typeof this]&&this),In=Sn||Hn!==(Bn&&Bn.window)&&Hn||jn||Bn||Function("return this")(),Nn=F();(Hn||jn||{})._=Nn,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return Nn}):Cn&&xn?(An&&((xn.exports=Nn)._=Nn),Cn._=Nn):In._=Nn}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("./../../bower_components/eventemitter2/lib/eventemitter2.js"),s=t("./TouchController"),l=r(s),f=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,e);var n=i(this,Object.getPrototypeOf(e).call(this));return n.$element=t.$element,n.position={x:0,y:0},n.setEvent(),n}return a(e,t),u(e,[{key:"setEvent",value:function(){var t=this,e=new l["default"];e.setElement(this.$element.get(0)),e.on("touchmove",function(e){t.movePosition({x:-e.deltaX,y:-e.deltaY})}),e.on("touchend",function(e){t.animatePosition({x:0,y:0}),e.isDoubleTap&&t.emit("doubletapped")})}},{key:"checkPosition",value:function(){return this.$element.position()}},{key:"movePosition",value:function(t){var e=this.checkPosition(),n={x:e.left-t.x,y:e.top-t.y};this.jumpPosition(n),this.emit("moved",this.position)}},{key:"animatePosition",value:function(t){var e=this;this.setPosition(t),this.$element.animate({top:t.y+"px",left:t.x+"px"},function(){e.emit("animateend",e.position)})}},{key:"jumpPosition",value:function(t){this.setPosition(t),this.$element.css({top:t.y+"px",left:t.x+"px"}),this.emit("jumped",this.position)}},{key:"setPosition",value:function(t){this.position=t}}]),e}(c.EventEmitter2);n["default"]=f},{"./../../bower_components/eventemitter2/lib/eventemitter2.js":1,"./TouchController":10}],5:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function i(){r(this,i),this.COLS=9,this.ROWS=13,this.VOXEL_LENGTH=4,this.VOXEL_SIZE=45,this.START_X=Math.floor((this.COLS-this.VOXEL_LENGTH)/2),this.START_Y=0,this.START_Z=Math.floor((this.COLS-this.VOXEL_LENGTH)/2),this.HIDDEN_ROWS=this.VOXEL_LENGTH,this.LOGICAL_ROWS=this.ROWS+this.HIDDEN_ROWS,this.WIDTH=this.VOXEL_SIZE*this.COLS,this.HEIGHT=this.VOXEL_SIZE*this.ROWS,this.CENTER_X=this.WIDTH/2,this.CENTER_Y=this.HEIGHT/2,this.CENTER_Z=this.WIDTH/2,this.CLEARLINE_BLOCK_ID=14,this.GAMEOVER_BLOCK_ID=15,this.RENDER_INTERVAL=30,this.TICK_INTERVAL=700,this.SPEEDUP_RATE=10,this.KEYS_MODEL={37:"left",39:"right",40:"forward",38:"backward",32:"rotate",16:"rotateX",17:"rotateY"},this.KEYS_VIEW={48:"pers",49:"ortho1",50:"ortho2",51:"ortho3"},this.KEYS_CONTROLLER={67:"camera",66:"block"},this.SHADOW_BLOCK={id:8,color:"#000",opacity:.3},this.BLOCK_LIST=[{id:0,color:"rgb(254,183,76)",shape:[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]},{id:1,color:"rgb(251,122,111)",shape:[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]},{id:2,color:"rgb(247,181,90)",shape:[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,1],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]},{id:3,color:"rgb(241,221,96)",shape:[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]},{id:4,color:"rgb(191,216,94)",shape:[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]},{id:5,color:"rgb(107,180,252)",shape:[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[0,1,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]},{id:6,color:"rgb(202,162,221)",shape:[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,1,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]},{id:7,color:"rgb(100,198,173)",shape:[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]}]};e.exports=new o},{}],6:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("lodash"),s=r(c),l=t("./../../bower_components/eventemitter2/lib/eventemitter2.js"),f=t("./TouchController"),h=r(f),p=t("./StickController"),v=r(p),d=t("./Tetris3dCONST"),m=r(d),_=m["default"],E=function(t){function e(t,n){o(this,e);var r=i(this,Object.getPrototypeOf(e).call(this));return r.model=t,r.view=n,r.$root=$(".js-game-controller"),r.$stickContainer=$(".js-stick-container"),r.$stickToucharea=$(".js-stick-toucharea"),r.touch=new h["default"],r.stick=new v["default"]({$element:r.$stickToucharea}),r.setModelEvent(),r.setBlurEvent(),r.setKeyEvent(),r.setTouchEvent(r.$root),r.setStickController(),r}return a(e,t),u(e,[{key:"newGame",value:function(){this.view.init(),this.view.start(),this.model.initGame(),this.model.startGame(),this.isPlayngGame=!0}},{key:"pauseGame",value:function(){this.view.stop(),this.model.pauseGame(),this.isPlayngGame=!1}},{key:"resumeGame",value:function(){this.view.start(),this.model.resumeGame(),this.isPlayngGame=!0}},{key:"setModelEvent",value:function(){var t=this;this.model.on("gamestart",function(){}),this.model.on("newblockcreated",function(){}),this.model.on("currentblockcreated",function(){t.view.drawCurrentBlock(t.model.currentBlock);var e=s["default"].clone(t.model.currentBlock);e.y=_.ROWS+1,e.id=_.SHADOW_BLOCK.id,t.view.drawShadowBlock(e)}),this.model.on("nextblockcreated",function(){}),this.model.on("gameover",function(){alert("gameover!!")}),this.model.on("tick",function(e){t.view.moveCurrentBlock(t.model.currentBlock);var n=s["default"].clone(t.model.currentBlock);n.id=_.SHADOW_BLOCK.id,t.model.dropBlockY(n),t.view.moveShadowBlock(n)}),this.model.on("gamequit",function(){}),this.model.on("freeze",function(){t.updateBoard()}),this.model.on("clearline",function(e){t.updateBoard()})}},{key:"setBlurEvent",value:function(){var t=this;$(window).on("blur",function(){t.pauseGame()}).on("focus",function(){t.resumeGame()})}},{key:"setKeyEvent",value:function(){var t=this;$(document).on("keydown",function(e){"undefined"!=typeof _.KEYS_MODEL[e.keyCode]&&(e.preventDefault(),t.model.moveBlock(_.KEYS_MODEL[e.keyCode])),"undefined"!=typeof _.KEYS_VIEW[e.keyCode]&&(e.preventDefault(),t.view.setCamera(_.KEYS_VIEW[e.keyCode])),"undefined"!=typeof _.KEYS_CONTROLLER[e.keyCode]&&(e.preventDefault(),t.swithMode(_.KEYS_CONTROLLER[e.keyCode]))})}},{key:"setTouchEvent",value:function(t){var e=this;this.touch.setElement(t.get(0));var n=void 0,r=void 0,o=!1;this.model.on("freeze",function(){o=!0}),this.touch.on("touchstart",function(t){n=t.touchStartX,r=t.touchStartY,o=!1}),this.touch.on("touchmove",function(t){var i=t.touchX-n,a=t.touchY-r,u=i/_.VOXEL_SIZE|0,c=a/_.VOXEL_SIZE|0;if(!o){for(;u;){var s=u/Math.abs(u);e.moveBlockRightAndLeft(s),u-=s,n=t.touchX}for(;c;){var s=c/Math.abs(c);e.moveBlockBackAndForward(s),c-=s,r=t.touchY}}}),this.touch.on("touchend",function(t){t.isDoubleTap&&(e.model.dropBlockY(),e.view.moveCurrentBlock(e.model.currentBlock))})}},{key:"setStickController",value:function(){var t=this;this.stick.on("moved",function(e){t.view.controls.rotate({x:e.x/-1e3,y:e.y/-1e3})}),this.stick.on("doubletapped",function(e){t.view.setCamera()})}},{key:"swithMode",value:function(t){switch(t){case"camera":this.switchModeCamera();break;case"block":this.switchModeBlock()}}},{key:"switchModeCamera",value:function(){console.log("switchModeCamera"),this.touch.dispose(),this.view.startControls(),this.emit("switchModeCamera")}},{key:"switchModeBlock",value:function(){console.log("switchModeBlock"),this.touch.setEvent(),this.view.stopControls(),this.emit("switchModeBlock")}},{key:"changeRotateDirection",value:function(){console.log("changeRotateDirection"),this.isVertical=!this.isVertical,this.emit("changeRotateDirection")}},{key:"updateBoard",value:function(){var t=s["default"].cloneDeep(this.model.board);t.forEach(function(t){t.splice(0,_.HIDDEN_ROWS)}),this.view.disposeBoard(),this.view.drawBoard(t)}},{key:"rotateBlock",value:function(){this.isVertical?this.rotateBlockVertical():this.rotateBlockHorizontal()}},{key:"rotateBlockHorizontal",value:function(){this.model.rotateBlockXZ()}},{key:"rotateBlockVertical",value:function(){var t=this.view.checkCameraDirection();0!==t.x&&this.model.rotateBlockXY(t.x<0),0!==t.z&&this.model.rotateBlockZY(t.z<0)}},{key:"moveBlockRightAndLeft",value:function(t){var e=this.view.checkCameraDirection();0!==e.x&&this.model.moveBlockZ(t*e.x),0!==e.z&&this.model.moveBlockX(t*-e.z)}},{key:"moveBlockBackAndForward",value:function(t){var e=this.view.checkCameraDirection();0!==e.x&&this.model.moveBlockX(t*e.x),0!==e.z&&this.model.moveBlockZ(t*e.z)}}]),e}(l.EventEmitter2);n["default"]=E},{"./../../bower_components/eventemitter2/lib/eventemitter2.js":1,"./StickController":4,"./Tetris3dCONST":5,"./TouchController":10,lodash:3}],7:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("./../../bower_components/eventemitter2/lib/eventemitter2.js"),s=t("./Tetris3dCONST"),l=r(s),f=l["default"],h=function(t){function e(){return o(this,e),i(this,Object.getPrototypeOf(e).call(this))}return a(e,t),u(e,[{key:"newGame",value:function(){this.initGame(),this.startGame()}},{key:"initGame",value:function(){clearTimeout(this.tickId),clearInterval(this.renderId),this.isPlayng=!1,this.lose=!1,this.tickInterval=f.TICK_INTERVAL,this.sumOfClearLines=0,this.score=0,this.frameCount=0,this.initBoad(),this.initBlock(),this.createNextBlock()}},{key:"startGame",value:function(){this.isPlayng=!0,this.createCurrentBlock(),this.createNextBlock(),this.tick(),this.emit("gamestart")}},{key:"initBoad",value:function(){this.board=[];for(var t=0;t<f.COLS;++t){this.board[t]=[];for(var e=0;e<f.LOGICAL_ROWS;++e){this.board[t][e]=[];for(var n=0;n<f.COLS;++n)this.board[t][e][n]=0}}}},{key:"initBlock",value:function(){this.nextBlock=this.createBlock(0),this.currentBlock=this.createBlock(0),this.currentBlock.x=f.START_X,this.currentBlock.y=f.START_Y,this.currentBlock.z=f.START_Z}},{key:"createBlock",value:function(t){var e=f.BLOCK_LIST[t]||{},n={id:t,color:e.color,shape:[],x:0,y:0,z:0},r=e.shape;n.shape=[];for(var o=0;o<f.VOXEL_LENGTH;++o){n.shape[o]=[];for(var i=0;i<f.VOXEL_LENGTH;++i){n.shape[o][i]=[];for(var a=0;a<f.VOXEL_LENGTH;++a)n.shape[o][i][a]=r[o][i][a]||0}}return this.emit("newblockcreated"),n}},{key:"createCurrentBlock",value:function(){this.nextBlock||this.createNextBlock(),this.currentBlock=this.nextBlock,this.currentBlock.x=f.START_X,this.currentBlock.y=f.START_Y,this.currentBlock.z=f.START_Z,this.emit("currentblockcreated")}},{key:"createNextBlock",value:function(){var t=Math.floor(Math.random()*f.BLOCK_LIST.length);this.nextBlock=this.createBlock(t),this.emit("nextblockcreated")}},{key:"tick",value:function(){var t=this;clearTimeout(this.tickId);var e=this.moveBlock("down");if(!e){if(this.freeze(),this.clearLines(),this.checkGameOver())return this.emit("gameover"),!1;this.frameCount++,this.createCurrentBlock(),this.createNextBlock()}this.tickId=setTimeout(function(){t.tick()},this.tickInterval),this.emit("tick",!e)}},{key:"quitGame",value:function(){var t=$.Deferred();return t.promise()}},{key:"stopGame",value:function(){this.quitGame()}},{key:"pauseGame",value:function(){clearTimeout(this.tickId)}},{key:"resumeGame",value:function(){var t=this;this.isPlayng&&(this.tickId=setTimeout(function(){t.tick()},this.tickInterval))}},{key:"freeze",value:function(){for(var t=0;t<f.VOXEL_LENGTH;++t)for(var e=0;e<f.VOXEL_LENGTH;++e)for(var n=0;n<f.VOXEL_LENGTH;++n){var r=n+this.currentBlock.x,o=e+this.currentBlock.y,i=t+this.currentBlock.z;!this.currentBlock.shape[t][e][n]||0>i||(this.board[i][o][r]=this.currentBlock.shape[t][e][n]?this.currentBlock.id+1:0)}this.emit("freeze")}},{key:"clearLines",value:function(){var t=0,e=[],n=(Array.apply(null,Array(f.COLS)).map(function(){return 0}),$.Deferred());n.resolve();for(var r=f.LOGICAL_ROWS-1;r>=0;--r){for(var o=[],i=[],a=0;a<f.COLS;++a){for(var u=!0,c=0;c<f.COLS&&(u=0!==this.board[a][r][c],u);++c);u&&(o.push(a),t++,this.sumOfClearLines++,this.tickInterval-=f.SPEEDUP_RATE)}for(var c=0;c<f.COLS;++c){for(var u=!0,a=0;a<f.COLS&&(u=0!==this.board[a][r][c],u);++a);u&&(i.push(c),t++,this.sumOfClearLines++,this.tickInterval-=f.SPEEDUP_RATE)}e.push([i,o])}n.then(this.dropRow(e)),this.score+=1>=t?t:Math.pow(2,t),t>0&&this.emit("clearline",e)}},{key:"dropRow",value:function(t){var e=this;return function(){var n=$.Deferred();if(t.length)return t.forEach(function(t){var n=t[0],r=t[1];(n.length||r.length)&&(n.forEach(function(t){e.dropRowX(t)}),r.forEach(function(t){e.dropRowZ(t)}))}),n.resolve(),n.promise()}}},{key:"dropRowX",value:function(t){for(var e=[],n=0;n<f.LOGICAL_ROWS;++n){e[n]=[];for(var r=0;r<f.COLS;++r)e[n][r]=this.board[r][n][t],this.board[r][n][t]=n?e[n-1][r]:0}}},{key:"dropRowZ",value:function(t){for(var e=[],n=0;n<f.LOGICAL_ROWS;++n){e[n]=[];for(var r=0;r<f.COLS;++r)e[n][r]=this.board[t][n][r],this.board[t][n][r]=n?e[n-1][r]:0}}},{key:"rotateBoard",value:function(t){for(var e=f.COLS-1,n=[],r=0;r<f.COLS;++r){
n[r]=[];for(var o=0;o<f.LOGICAL_ROWS;++o){n[r][o]=[];for(var i=0;i<f.COLS;++i)n[r][o][i]=t[e-i][o][r]}}return n}},{key:"dropBlockY",value:function(){for(var t=arguments.length<=0||void 0===arguments[0]?this.currentBlock:arguments[0],e=this.valid(0,1,0,t);e;)t.y++,e=this.valid(0,1,0,t);return e}},{key:"moveBlockX",value:function(t){var e=this.valid(t,0,0);return e&&(this.currentBlock.x+=t),e}},{key:"moveBlockY",value:function(t){var e=this.valid(0,t,0);return e&&(this.currentBlock.y+=t),e}},{key:"moveBlockZ",value:function(t){var e=this.valid(0,0,t);return e&&(this.currentBlock.z+=t),e}},{key:"moveBlock",value:function(t){var e=void 0;switch(t){case"left":return e=this.valid(1,0,0),e&&++this.currentBlock.x,e;case"right":return e=this.valid(-1,0,0),e&&--this.currentBlock.x,e;case"down":return e=this.valid(0,1,0),e&&++this.currentBlock.y,e;case"forward":return e=this.valid(0,0,1),e&&++this.currentBlock.z,e;case"backward":return e=this.valid(0,0,-1),e&&--this.currentBlock.z,e;case"rotate":var n=Object.assign(this.currentBlock);return n.shape=this.rotateXZ(this.currentBlock.shape),e=this.valid(0,0,0,n),e&&(this.currentBlock=n),e}}},{key:"rotateBlockXZ",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],e=Object.assign(this.currentBlock);e.shape=this.rotateXZ(this.currentBlock.shape,t);var n=this.valid(0,0,0,e);return n&&(this.currentBlock=e),n}},{key:"rotateBlockXY",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],e=Object.assign(this.currentBlock);e.shape=this.rotateXY(this.currentBlock.shape,t);var n=this.valid(0,0,0,e);return n&&(this.currentBlock=e),n}},{key:"rotateBlockZY",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],e=Object.assign(this.currentBlock);e.shape=this.rotateZY(this.currentBlock.shape,t);var n=this.valid(0,0,0,e);return n&&(this.currentBlock=e),n}},{key:"rotateXZ",value:function(t,e){for(var n=f.VOXEL_LENGTH-1,r=[],o=0;o<f.VOXEL_LENGTH;++o){r[o]=[];for(var i=0;i<f.VOXEL_LENGTH;++i){r[o][i]=[];for(var a=0;a<f.VOXEL_LENGTH;++a)e?r[o][i][a]=t[n-a][i][o]:r[o][i][a]=t[a][i][n-o]}}return r}},{key:"rotateXY",value:function(t,e){for(var n=f.VOXEL_LENGTH-1,r=[],o=0;o<f.VOXEL_LENGTH;++o){r[o]=[];for(var i=0;i<f.VOXEL_LENGTH;++i){r[o][i]=[];for(var a=0;a<f.VOXEL_LENGTH;++a)e?r[o][i][a]=t[o][n-a][i]:r[o][i][a]=t[o][a][n-i]}}return r}},{key:"rotateZY",value:function(t,e){for(var n=f.VOXEL_LENGTH-1,r=[],o=0;o<f.VOXEL_LENGTH;++o){r[o]=[];for(var i=0;i<f.VOXEL_LENGTH;++i){r[o][i]=[];for(var a=0;a<f.VOXEL_LENGTH;++a)e?r[o][i][a]=t[i][n-o][a]:r[o][i][a]=t[n-i][o][a]}}return r}},{key:"valid",value:function(){for(var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=arguments.length<=3||void 0===arguments[3]?this.currentBlock:arguments[3],o=r.x+t,i=r.y+e,a=r.z+n,u=0;u<f.VOXEL_LENGTH;++u)for(var c=0;c<f.VOXEL_LENGTH;++c)for(var s=0;s<f.VOXEL_LENGTH;++s){var l=s+o,h=c+i,p=u+a;if(r.shape[u][c][s]&&("undefined"==typeof this.board[p]||"undefined"==typeof this.board[p][h]||"undefined"==typeof this.board[p][h][l]||this.board[p][h][l]||0>l||l>=f.COLS||0>p||p>=f.COLS||h>=f.LOGICAL_ROWS))return!1}return!0}},{key:"checkGameOver",value:function(){for(var t=!0,e=0;e<f.VOXEL_LENGTH;++e)for(var n=0;n<f.VOXEL_LENGTH;++n)for(var r=0;r<f.VOXEL_LENGTH;++r){var o=(r+this.currentBlock.x,n+this.currentBlock.y);e+this.currentBlock.z;if(o>=f.HIDDEN_ROWS){t=!1;break}}return t}}]),e}(c.EventEmitter2);n["default"]=h},{"./../../bower_components/eventemitter2/lib/eventemitter2.js":1,"./Tetris3dCONST":5}],8:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("./../../bower_components/eventemitter2/lib/eventemitter2.js"),c=function(t){function e(t){r(this,e);var n=o(this,Object.getPrototypeOf(e).call(this));return n.controller=t,n.$btnPause=$(".js-btn-pause"),n.$switchCamera=$(".js-switch-camera"),n.$switchBlock=$(".js-switch-block"),n.$switchRotate=$(".js-switch-rotate"),n.$btnRotateVertical=$(".js-btn-rotate-vertical"),n.$btnRotateHorizontal=$(".js-btn-rotate-horizontal"),n.$btns=n.$switchCamera.add(n.$switchBlock),n.setEvent(),n.setControllerEvent(),n}return i(e,t),a(e,[{key:"setEvent",value:function(){var t=this;$("button").on("touchstart",function(t){t.stopPropagation()}),this.$switchCamera.on("click",function(e){t.switchModeCamera(),t.controller.switchModeCamera()}),this.$switchBlock.on("click",function(e){t.switchModeBlock(),t.controller.switchModeBlock()}),this.$switchRotate.on("click",function(e){t.$switchRotate.toggleClass("is-active"),t.controller.changeRotateDirection()}),this.$btnPause.on("click",function(e){t.$btnPause.toggleClass("is-active"),t.controller.isPlayngGame?t.controller.pauseGame():t.controller.resumeGame()}),this.$btnRotateVertical.on("click",function(e){t.controller.rotateBlockVertical()}),this.$btnRotateHorizontal.on("click",function(e){t.controller.rotateBlockHorizontal()})}},{key:"setControllerEvent",value:function(){var t=this;this.controller.on("switchModeCamera",function(){t.switchModeCamera()}),this.controller.on("switchModeBlock",function(){t.switchModeBlock()})}},{key:"switchModeCamera",value:function(){this.$btns.removeClass("is-active"),this.$switchCamera.addClass("is-active")}},{key:"switchModeBlock",value:function(){this.$btns.removeClass("is-active"),this.$switchBlock.addClass("is-active")}}]),e}(u.EventEmitter2);n["default"]=c},{"./../../bower_components/eventemitter2/lib/eventemitter2.js":1}],9:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();t("./../../bower_components/three.js/examples/js/controls/OrbitControls.js"),t("./lib/EditorControls2");var a=t("./Tetris3dCONST"),u=r(a),c=u["default"],s=function(){function t(){o(this,t),this.framecount=0,this.CONTAINER_ID="js-game-view",this.ZERO_VECTOR=new THREE.Vector3(0,0,0),this.CAMERA_DISTANCE_DEFAULT=1500,this.CENTER_VECTOR=new THREE.Vector3(c.CENTER_X,c.CENTER_Y,c.CENTER_Z),this.CAMERA_POSITION=new THREE.Vector3(c.CENTER_X,-100,this.CAMERA_DISTANCE_DEFAULT),this.CAMERA_NEAR=1,this.CAMERA_FAR=1e5}return i(t,[{key:"init",value:function(){var t=this;this.container=document.getElementById(this.CONTAINER_ID),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(15790320),this.renderer.setPixelRatio(window.devicePixelRatio||1),this.renderer.setSize(c.WIDTH,c.HEIGHT),this.container.appendChild(this.renderer.domElement),this.scene=new THREE.Scene,this.perscamera=new THREE.PerspectiveCamera(45,c.WIDTH/c.HEIGHT,this.CAMERA_NEAR,this.CAMERA_FAR),this.orthocamera=new THREE.OrthographicCamera(-window.innerWidth/2,window.innerWidth/2,window.innerHeight/2,-window.innerHeight/2,this.CAMERA_NEAR,this.CAMERA_FAR),this.cubecamera=new THREE.CubeCamera(this.CAMERA_NEAR,this.CAMERA_FAR,128),this.setCamera();var e=new THREE.AxisHelper(this.CAMERA_FAR);e.position.set(0,0,0);var n=c.CENTER_X,r=c.VOXEL_SIZE,o=new THREE.GridHelper(n,r);o.position.set(n,c.HEIGHT,n),this.scene.add(o);var n=c.CENTER_X,r=2*n,o=new THREE.GridHelper(n,r);o.position.set(n,0,n);var n=c.COLS*c.VOXEL_SIZE,i=new THREE.Geometry;i.vertices.push(new THREE.Vector3(0,c.HEIGHT,0),new THREE.Vector3(0,c.HEIGHT,n),new THREE.Vector3(0,0,n),new THREE.Vector3(n,0,n),new THREE.Vector3(n,c.HEIGHT,n),new THREE.Vector3(n,c.HEIGHT,0),new THREE.Vector3(n,0,0),new THREE.Vector3(0,0,0),new THREE.Vector3(0,c.HEIGHT,0));var a=new THREE.LineBasicMaterial({color:0,opacity:.2,transparent:!0}),u=new THREE.Line(i,a);u.type=THREE.LinePieces;var s=new THREE.AmbientLight(6316128);this.scene.add(s);var l=new THREE.DirectionalLight(16777215);l.position.set(.5,-.75,1).normalize(),this.scene.add(l),this.mouse2D=new THREE.Vector3(0,1e4,.5),this.cubeGeo=new THREE.BoxGeometry(c.VOXEL_SIZE,c.VOXEL_SIZE,c.VOXEL_SIZE),this.cubeMaterial=[],c.BLOCK_LIST.forEach(function(e){var n=new THREE.MeshLambertMaterial({color:e.color});t.cubeMaterial.push(n)});var a=new THREE.MeshLambertMaterial({color:c.SHADOW_BLOCK.color,transparent:!0,opacity:c.SHADOW_BLOCK.opacity});this.cubeMaterial.push(a),this.setSize()}},{key:"setSize",value:function(){this.width=window.innerWidth||c.WIDTH,this.height=window.innerHeight||c.HEIGHT,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}},{key:"setCamera",value:function(t){switch(t){case"ortho1":this.camera=this.orthocamera,this.camera.position.set(c.CENTER_X,c.CENTER_Y,this.CAMERA_DISTANCE_DEFAULT);break;case"ortho2":this.camera=this.orthocamera,this.camera.position.set(this.CAMERA_DISTANCE_DEFAULT,c.CENTER_Y,c.CENTER_Z);break;case"ortho3":this.camera=this.orthocamera,this.camera.position.set(c.CENTER_X,-1e3,c.CENTER_Z);break;default:this.camera=this.perscamera,this.camera.position.copy(this.CAMERA_POSITION)}this.camera.up.set(0,-1,0),this.camera.zoom=1,this.camera.lookAt(this.CENTER_VECTOR),this.stopControls(),this.startControls()}},{key:"stopControls",value:function(){this.controls&&this.controls.dispose()}},{key:"startControls",value:function(){this.controls&&this.stopControls(),this.controls=new THREE.EditorControls(this.camera),this.controls.center=this.CENTER_VECTOR}},{key:"checkCameraDirection",value:function(){var t=this.camera.position.clone().sub(this.CENTER_VECTOR),e={x:Math.sign(Math.abs(t.x)>Math.abs(t.z)?t.x:0),y:Math.sign(-t.y),z:Math.sign(Math.abs(t.z)>Math.abs(t.x)?t.z:0)};return e}},{key:"tick",value:function(){this.framecount++}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"drawBoard",value:function(t){this.boardVoxels=[];for(var e=0;e<c.COLS;++e)for(var n=0;n<c.ROWS;++n)for(var r=0;r<c.COLS;++r){var o=r,i=n,a=e,u=t[a][i][o]-1;if(t[a][i][o]){var s=this.drawVoxel(o,i,a,u);this.boardVoxels.push(s)}}}},{key:"disposeBoard",value:function(){var t=this;this.boardVoxels&&this.boardVoxels.length&&this.boardVoxels.forEach(function(e){e.geometry.dispose(),e.material.dispose(),t.scene.remove(e)})}},{key:"disposeBlock",value:function(t){var e=this;t.voxels.forEach(function(t){t.geometry.dispose(),t.material.dispose(),e.scene.remove(t)})}},{key:"drawCurrentBlock",value:function(t){this.currentBlock&&this.disposeBlock(this.currentBlock),this.currentBlock=t,this.currentBlock.voxels=[],this.drawBlock(t,!0)}},{key:"drawShadowBlock",value:function(t){this.shadowBlock&&this.disposeBlock(this.shadowBlock),this.shadowBlock=t,this.shadowBlock.voxels=[],this.drawBlock(t,!1,!0)}},{key:"drawBlock",value:function(t,e,n){for(var r=0;r<c.VOXEL_LENGTH;++r)for(var o=0;o<c.VOXEL_LENGTH;++o)for(var i=0;i<c.VOXEL_LENGTH;++i)if(t&&t.shape[r][o][i]){var a=i+t.x,u=o+t.y-c.HIDDEN_ROWS,s=r+t.z;e?this.drawCurrentVoxel(a,u,s,t.id):n?this.drawShadowVoxel(a,u,s,t.id):this.drawVoxel(a,u,s,t.id)}}},{key:"drawCurrentVoxel",value:function(t,e,n,r){var o=this.drawVoxel(t,e,n,r);this.currentBlock.voxels.push(o)}},{key:"drawShadowVoxel",value:function(t,e,n,r){var o=this.drawVoxel(t,e,n,r);this.shadowBlock.voxels.push(o)}},{key:"drawVoxel",value:function(t,e,n,r){var o=t*c.VOXEL_SIZE,i=e*c.VOXEL_SIZE,a=n*c.VOXEL_SIZE,u=new THREE.Mesh(this.cubeGeo,this.cubeMaterial[r]);return u.position.set(o,i,a),u.position.addScalar(c.VOXEL_SIZE/2),0>e?u:(this.scene.add(u),u)}},{key:"moveCurrentBlock",value:function(t){this.currentBlock&&this.moveBlock(t,!0)}},{key:"moveShadowBlock",value:function(t){this.shadowBlock&&this.moveBlock(t,!1,!0)}},{key:"moveBlock",value:function(t,e,n){for(var r=0,o=0;o<c.VOXEL_LENGTH;++o)for(var i=0;i<c.VOXEL_LENGTH;++i)for(var a=0;a<c.VOXEL_LENGTH;++a)if(t&&t.shape[o][i][a]){var u=a+t.x,s=i+t.y-c.HIDDEN_ROWS,l=o+t.z;e?this.moveCurrentVoxel(u,s,l,r):n?this.moveShadowVoxel(u,s,l,r):this.moveVoxel(u,s,l,r),r++}}},{key:"moveCurrentVoxel",value:function(t,e,n,r){if(!(0>e)){var o=t*c.VOXEL_SIZE,i=e*c.VOXEL_SIZE,a=n*c.VOXEL_SIZE,u=this.currentBlock.voxels[r];u.position.set(o,i,a),u.position.addScalar(c.VOXEL_SIZE/2),this.scene.add(u)}}},{key:"moveShadowVoxel",value:function(t,e,n,r){if(!(0>e)){var o=t*c.VOXEL_SIZE,i=e*c.VOXEL_SIZE,a=n*c.VOXEL_SIZE,u=this.shadowBlock.voxels[r];u.position.set(o,i,a),u.position.addScalar(c.VOXEL_SIZE/2),this.scene.add(u)}}},{key:"moveVoxel",value:function(t,e,n,r){if(!(0>e)){var o=t*c.VOXEL_SIZE,i=e*c.VOXEL_SIZE,a=n*c.VOXEL_SIZE,u=this.currentBlock.voxels[r];u.position.set(o,i,a),u.position.addScalar(c.VOXEL_SIZE/2),this.scene.add(u)}}},{key:"start",value:function(){var t=this,e=Date.now(),n=e,r=n,o=n;this.loopId=null,function i(e){var a=Date.now(),u=a-r,s=a-o;u>c.RENDER_INTERVAL&&(r=a,t.render()),s>c.TICK_INTERVAL&&(o=a,t.tick()),n=a,t.loopId=requestAnimationFrame(i)}()}},{key:"stop",value:function(){cancelAnimationFrame(this.loopId)}}]),t}();n["default"]=s},{"./../../bower_components/three.js/examples/js/controls/OrbitControls.js":2,"./Tetris3dCONST":5,"./lib/EditorControls2":12}],10:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("./../../bower_components/eventemitter2/lib/eventemitter2.js"),c=function(t){function e(){r(this,e);var t=o(this,Object.getPrototypeOf(e).call(this));return t.doubleTapDelay=500,t.touchsupport="ontouchstart"in window,t.touchstart=t.touchsupport?"touchstart":"mousedown",t.touchmove=t.touchsupport?"touchmove":"mousemove",t.touchend=t.touchsupport?"touchend":"mouseup",t.deltaX=0,t.deltaY=0,t.moveX=0,t.moveY=0,t.defineEventListener(),t}return i(e,t),a(e,[{key:"setElement",value:function(t){this.element=t,this.setEvent()}},{key:"setEvent",value:function(){this.element.addEventListener(this.touchstart,this.onTouchStart,!1),this.element.addEventListener(this.touchmove,this.ontouchMove,!1),this.element.addEventListener(this.touchend,this.onTouchEnd,!1)}},{key:"dispose",value:function(){this.element.removeEventListener(this.touchstart,this.onTouchStart,!1),this.element.removeEventListener(this.touchmove,this.ontouchMove,!1),this.element.removeEventListener(this.touchend,this.onTouchEnd,!1)}},{key:"defineEventListener",value:function(){var t=this;this.onTouchStart=function(e){e.preventDefault(),e.stopPropagation(),t.isDoubleTap=t.isTap,t.isDragging=!0,t.isTap=!0,t.touchStartTime=Date.now(),t.touchStartX=t.touchsupport?e.touches[0].pageX:e.pageX,t.touchStartY=t.touchsupport?e.touches[0].pageY:e.pageY,t.emit("touchstart",{touchStartTime:t.touchStartTime,touchStartX:t.touchStartX,touchStartY:t.touchStartY})},this.ontouchMove=function(e){t.isDragging&&(t.lasttouchX=t.touchX||t.touchStartX,t.lasttouchY=t.touchY||t.touchStartY,t.touchX=t.touchsupport?e.touches[0].pageX:e.pageX,t.touchY=t.touchsupport?e.touches[0].pageY:e.pageY,t.deltaX=t.touchX-t.lasttouchX,t.deltaY=t.touchY-t.lasttouchY,t.moveX=t.touchX-t.touchStartX,t.moveY=t.touchY-t.touchStartY,t.isTap=t.isDoubleTap=!1,t.emit("touchmove",{lasttouchX:t.lasttouchX,lasttouchY:t.lasttouchY,touchX:t.touchX,touchY:t.touchY,deltaX:t.deltaX,deltaY:t.deltaY,moveX:t.moveX,moveY:t.moveY}))},this.onTouchEnd=function(e){t.isDragging=!1,t.elapsedTime=Date.now()-t.touchStartTime,t.touchEndX=t.touchX,t.touchEndY=t.touchY,t.emit("touchend",{elapsedTime:t.elapsedTime,touchEndX:t.touchEndX,touchEndY:t.touchEndY,moveX:t.moveX,moveY:t.moveY,isTap:t.isTap,isDoubleTap:t.isDoubleTap}),t.touchX=t.touchY=null,t.moveX=t.moveY=0,setTimeout(function(){t.isTap=t.isDoubleTap=!1},t.doubleTapDelay)}}}]),e}(u.EventEmitter2);n["default"]=c},{"./../../bower_components/eventemitter2/lib/eventemitter2.js":1}],11:[function(t,e,n){"use strict";var r=$(window);window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){var e=window.setTimeout(t,1e3/60);return e},window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||function(t){window.clearTimeout(t)};var o={TRANSITIONEND:"transitionend webkitTransitionEnd mozTransitionEnd msTransitionEnd oTransitionEnd",ANIMATIONEND:"animationend webkitAnimationEnd mozAnimationEnd msAnimationEnd oAnimationEnd",getWinSize:function(){window.winW=Math.max(r.width(),window.innerWidth||0),window.winH=Math.max(r.height(),window.innerHeight||0)},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},throttle:function(t,e){var n=!1,r=function(r){n||(n=!0,setTimeout(function(){n=!1,t(r)},e))};return r},debounce:function(t,e){var n,r=function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)};return r},async:function(t){!function e(n){t[n]&&t[n](function(){e(n+1)})}(0)},delay:function(t){return function(e){setTimeout(e,t)}},sleep:function(t){return function(){var e=$.Deferred();return setTimeout(function(){e.resolve()},t),e.promise()}},zeroPadding:function(t,e){return(new Array(e).join("0")+t).slice(-e)},getQueryString:function(){var t={},e=window.location.search;if(e.length>1)for(var n=e.substring(1),r=n.split("&"),o=0;o<r.length;o++){var i=r[o].split("="),a=decodeURIComponent(i[0]),u=decodeURIComponent(i[1]);t[a]=u}return t},getUserAgent:function(){return o.ua={},o.ua.name=window.navigator.userAgent.toLowerCase(),o.ua.isSP=/ipod|iphone|ipad|android/i.test(o.ua.name),o.ua.isPC=!o.ua.isSP,o.ua.isIOS=/ipod|iphone|ipad/i.test(o.ua.name),o.ua.isAndroid=/android/.test(o.ua.name),o.ua.isIE8=/msie 8/.test(o.ua.name),o.ua.isIE9=/msie 9/.test(o.ua.name),o.ua.isSP&&(document.body.className+=" isSP"),o.ua.isPC&&(document.body.className+=" isPC"),o.ua},removeOtherDeviceElement:function(){o.ua.isSP?$(".onlypc").remove():$(".onlysp").remove()}};e.exports=o},{}],12:[function(t,e,n){"use strict";THREE.EditorControls=function(t,e){function n(t){s.enabled!==!1&&(0===t.button?h=f.ROTATE:1===t.button?h=f.ZOOM:2===t.button&&(h=f.PAN),d.set(t.clientX,t.clientY),e.addEventListener("mousemove",r,!1),e.addEventListener("mouseup",o,!1),e.addEventListener("mouseout",o,!1),e.addEventListener("dblclick",o,!1))}function r(t){if(s.enabled!==!1){v.set(t.clientX,t.clientY);var e=v.x-d.x,n=v.y-d.y;h===f.ROTATE?s.rotate(new THREE.Vector3(.005*-e,.005*-n,0)):h===f.ZOOM?s.zoom(new THREE.Vector3(0,0,n)):h===f.PAN&&s.pan(new THREE.Vector3(-e,n,0)),d.set(t.clientX,t.clientY)}}function o(t){e.removeEventListener("mousemove",r,!1),e.removeEventListener("mouseup",o,!1),e.removeEventListener("mouseout",o,!1),e.removeEventListener("dblclick",o,!1),h=f.NONE}function i(t){t.preventDefault();var e=0;t.wheelDelta?e=-t.wheelDelta:t.detail&&(e=10*t.detail),s.zoom(new THREE.Vector3(0,0,e))}function a(t){t.preventDefault()}function u(t){if(s.enabled!==!1){switch(t.touches.length){case 1:E[0].set(t.touches[0].pageX,t.touches[0].pageY,0),E[1].set(t.touches[0].pageX,t.touches[0].pageY,0);break;case 2:E[0].set(t.touches[0].pageX,t.touches[0].pageY,0),E[1].set(t.touches[1].pageX,t.touches[1].pageY,0),g=E[0].distanceTo(E[1])}y[0].copy(E[0]),y[1].copy(E[1])}}function c(t){function e(t,e){var n=e[0];for(var r in e)n.distanceTo(t)>e[r].distanceTo(t)&&(n=e[r]);return n}if(s.enabled!==!1){switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:E[0].set(t.touches[0].pageX,t.touches[0].pageY,0),E[1].set(t.touches[0].pageX,t.touches[0].pageY,0),s.rotate(E[0].sub(e(E[0],y)).multiplyScalar(-.005));break;case 2:E[0].set(t.touches[0].pageX,t.touches[0].pageY,0),E[1].set(t.touches[1].pageX,t.touches[1].pageY,0),distance=E[0].distanceTo(E[1]),s.zoom(new THREE.Vector3(0,0,g-distance)),g=distance;var n=E[0].clone().sub(e(E[0],y)),r=E[1].clone().sub(e(E[1],y));n.x=-n.x,r.x=-r.x,s.pan(n.add(r).multiplyScalar(.5))}y[0].copy(E[0]),y[1].copy(E[1])}}e=void 0!==e?e:document,this.enabled=!0,this.center=new THREE.Vector3;var s=this,l=new THREE.Vector3,f={NONE:-1,ROTATE:0,ZOOM:1,PAN:2},h=f.NONE,p=new THREE.Matrix3,v=new THREE.Vector2,d=new THREE.Vector2,m=new THREE.Spherical,_={type:"change"};this.focus=function(e,n){var r=new THREE.Vector3;if(e.matrixWorld.decompose(s.center,new THREE.Quaternion,r),n&&e.geometry){r=(r.x+r.y+r.z)/3,s.center.add(e.geometry.boundingSphere.center.clone().multiplyScalar(r));var o=e.geometry.boundingSphere.radius*r,i=t.position.clone().sub(s.center).normalize().multiplyScalar(2*o);t.position.copy(s.center).add(i)}t.lookAt(s.center),s.dispatchEvent(_)},this.pan=function(e){var n=t.position.distanceTo(s.center);e.multiplyScalar(.001*n),e.applyMatrix3(p.getNormalMatrix(t.matrix)),t.position.add(e),s.center.add(e),s.dispatchEvent(_)},this.zoom=function(e){var n=t.position.distanceTo(s.center);e.multiplyScalar(.001*n),e.length()>n||(e.applyMatrix3(p.getNormalMatrix(t.matrix)),t.position.add(e),s.dispatchEvent(_))},this.rotate=function(e){l.copy(t.position).sub(s.center),m.setFromVector3(l),m.theta+=e.x,m.phi+=e.y,m.makeSafe(),l.setFromSpherical(m),t.position.copy(s.center).add(l),t.lookAt(s.center),s.dispatchEvent(_)},this.dispose=function(){e.removeEventListener("contextmenu",a,!1),e.removeEventListener("mousedown",n,!1),e.removeEventListener("mousewheel",i,!1),e.removeEventListener("MozMousePixelScroll",i,!1),e.removeEventListener("mousemove",r,!1),e.removeEventListener("mouseup",o,!1),e.removeEventListener("mouseout",o,!1),e.removeEventListener("dblclick",o,!1),e.removeEventListener("touchstart",u,!1),e.removeEventListener("touchmove",c,!1)},e.addEventListener("contextmenu",a,!1),e.addEventListener("mousedown",n,!1),e.addEventListener("mousewheel",i,!1),e.addEventListener("MozMousePixelScroll",i,!1);var E=(new THREE.Vector3,[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]),y=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],g=null;e.addEventListener("touchstart",u,!1),e.addEventListener("touchmove",c,!1)},THREE.EditorControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.EditorControls.prototype.constructor=THREE.EditorControls},{}],13:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=t("./Util"),i=r(o),a=t("./Tetris3dCONST"),u=r(a),c=t("./Tetris3dView"),s=r(c),l=t("./Tetris3dModel"),f=r(l),h=t("./Tetris3dController"),p=r(h),v=t("./Tetris3dUI"),d=r(v),m=new f["default"],_=new s["default"],E=new p["default"](m,_),y=new d["default"](E);E.newGame(),y.switchModeBlock(),E.switchModeBlock();var g=i["default"].getQueryString();g.debug&&!function(){var t=+g.debug||0,e=u["default"].BLOCK_LIST[t].shape;u["default"].BLOCK_LIST.forEach(function(t){t.shape=e}),g.interval&&(m.tickInterval=+g.interval)}()},{"./Tetris3dCONST":5,"./Tetris3dController":6,"./Tetris3dModel":7,"./Tetris3dUI":8,"./Tetris3dView":9,"./Util":11}]},{},[13]);